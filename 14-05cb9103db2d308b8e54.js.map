{"version":3,"sources":["webpack:///./node_modules/events/events.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/ev-emitter/ev-emitter.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/simple-input-events/simple-input-events.js","webpack:///./node_modules/three/examples/jsm/postprocessing/Pass.js","webpack:///./node_modules/three/examples/jsm/shaders/CopyShader.js","webpack:///./node_modules/three/examples/jsm/postprocessing/ShaderPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/MaskPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/EffectComposer.js","webpack:///./node_modules/three/examples/jsm/postprocessing/RenderPass.js","webpack:///./src/animations/pictureAnimation.js","webpack:///./src/animations/assists/utils.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/imagesloaded/imagesloaded.js"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","eventListener","undefined","errorListener","removeListener","slice","arguments","err","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","handler","len","listeners","addListener","on","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","_classCallCheck","instance","Constructor","window","EvEmitter","proto","eventName","indexOf","onceEvents","_onceEvents","splice","emitEvent","onceListeners","allOff","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","constructor","writable","configurable","isInsideBounds","event","bounds","clientX","clientY","left","right","top","bottom","getElementBounds","element","document","body","x","y","innerWidth","innerHeight","width","height","getBoundingClientRect","opt","obj","winEl","nodeType","nodeName","isDOMNode","initialIdentifier","lastTime","lastPosition","_opt","_opt$target","_opt$parent","parent","_opt$tapDistanceThres","tapDistanceThreshold","_opt$tapDelay","tapDelay","_opt$preventDefault","preventDefault","_opt$filtered","filtered","_opt$passive","passive","eventOpts","dragging","attached","attach","enable","disable","removeEventListener","mousedown","mouseup","mousemove","preventDefaultEvent","defineProperties","result","createEvent","getCurrentEvent","Date","now","a","b","wasDragging","touch","valid","changedTouches","identifier","inside","delta","dist","Math","sqrt","addEventListener","ev","first","touches","t","getFirstTargetTouch","id","getTouch","getPosition","uv","getNormalizedPosition","camera","geometry","FullScreenQuad","CopyShader","uniforms","vertexShader","join","fragmentShader","Pass","enabled","needsSwap","clear","renderToScreen","assign","setSize","render","material","_mesh","dispose","renderer","shader","textureID","clone","defines","fsQuad","writeBuffer","readBuffer","texture","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","scene","inverse","writeValue","clearValue","getContext","buffers","color","setMask","depth","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","renderTarget","parameters","minFilter","magFilter","format","stencilBuffer","size","getSize","_pixelRatio","getPixelRatio","_width","_height","renderTarget1","renderTarget2","passes","copyPass","clock","swapBuffers","tmp","addPass","pass","insertPass","isLastEnabledPass","passIndex","deltaTime","getDelta","currentRenderTarget","getRenderTarget","maskActive","il","NOTEQUAL","reset","effectiveWidth","effectiveHeight","setPixelRatio","pixelRatio","overrideMaterial","clearColor","clearAlpha","clearDepth","oldClearColor","oldClearAlpha","oldOverrideMaterial","oldAutoClear","autoClear","getClearColor","getHex","getClearAlpha","setClearColor","docScroll","winsize","createInputEvents","getPageYScroll","pageYOffset","documentElement","scrollTop","calcWinsize","onbeforeunload","scrollTo","THREE","antialias","alpha","sortObjects","outputEncoding","lookAt","time","speed","targetSpeed","mouse","followMouse","prevMouse","aspect","fov","atan","PI","customPass","resolution","updateProjectionMatrix","composer","EffectComposer","renderPass","RenderPass","myEffect","tDiffuse","distort","uMouse","uVelo","uScale","uType","ShaderPass","extensions","derivatives","side","progress","angle","texture1","texture2","uvRate1","transparent","children","forEach","min","Item","image","scroll","fromTop","windowHeight","withoutHeight","withHeight","insideRealTop","positions","getElementById","appendChild","domElement","mesh","needsUpdate","a1","a2","imageAspect","iHeight","iWidth","z","scale","createMesh","add","IntersectionObserver","entries","entry","boundingClientRect","compareArray","down","isVisible","intersectionRatio","log","visible","root","rootMargin","threshold","observe","shouldRender","currentScroll","onSetPosition","SmoothScroll","picItem","renderedStyles","translationY","previous","current","ease","setValue","setPosition","round","isBeingAnimatedNow","requestAnimationFrame","onRenderStyles","lerp","PictureAnimation","imagesLoaded","background","images","img","wrapper","querySelector","classList","remove","map","c","d","clamp","num","max","getMousePos","e","posx","posy","pageX","pageY","scrollLeft","_getPrototypeOf","_typeof","Symbol","iterator","_possibleConstructorReturn","assertThisInitialized","_defineProperty","factory","$","jQuery","extend","prop","arraySlice","ImagesLoaded","elem","options","onAlways","queryElem","querySelectorAll","elements","isArray","getImages","jqDeferred","Deferred","setTimeout","check","addElementImages","addImage","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","url","Image","style","getComputedStyle","reURL","matches","exec","backgroundImage","addBackground","loadingImage","_this","onProgress","progressedCount","hasAnyBroken","complete","isLoaded","notify","debug","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","src","handleEvent","method","onload","unbindEvents","onerror","makeJQueryPlugin","fn","callback","promise"],"mappings":"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","file":"14-05cb9103db2d308b8e54.js","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\n\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\nmodule.exports = EventEmitter;\nmodule.exports.once = once; // Backwards-compat with node 0.10.x\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\n\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function get() {\n    return defaultMaxListeners;\n  },\n  set: function set(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}; // Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\n\n\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    } // At least give some kind of context to the user\n\n\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n\n    for (var i = 0; i < len; ++i) {\n      ReflectApply(listeners[i], this, args);\n    }\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n\n      events = target._events;\n    }\n\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    } // Check for listener leak\n\n\n    m = _getMaxListeners(target);\n\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true; // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n}; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n\n    return this;\n  } // emit removeListener for all listeners on all events\n\n\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\n\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    copy[i] = arr[i];\n  }\n\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n\n      resolve([].slice.call(arguments));\n    }\n\n    ;\n    var errorListener; // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n(function (global, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /* globals define, module, window */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define(factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n})(typeof window != 'undefined' ? window : this, function () {\n  \"use strict\";\n\n  function EvEmitter() {}\n\n  var proto = EvEmitter.prototype;\n\n  proto.on = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    } // set events hash\n\n\n    var events = this._events = this._events || {}; // set listeners array\n\n    var listeners = events[eventName] = events[eventName] || []; // only add once\n\n    if (listeners.indexOf(listener) == -1) {\n      listeners.push(listener);\n    }\n\n    return this;\n  };\n\n  proto.once = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    } // add event\n\n\n    this.on(eventName, listener); // set once flag\n    // set onceEvents hash\n\n    var onceEvents = this._onceEvents = this._onceEvents || {}; // set onceListeners object\n\n    var onceListeners = onceEvents[eventName] = onceEvents[eventName] || {}; // set flag\n\n    onceListeners[listener] = true;\n    return this;\n  };\n\n  proto.off = function (eventName, listener) {\n    var listeners = this._events && this._events[eventName];\n\n    if (!listeners || !listeners.length) {\n      return;\n    }\n\n    var index = listeners.indexOf(listener);\n\n    if (index != -1) {\n      listeners.splice(index, 1);\n    }\n\n    return this;\n  };\n\n  proto.emitEvent = function (eventName, args) {\n    var listeners = this._events && this._events[eventName];\n\n    if (!listeners || !listeners.length) {\n      return;\n    } // copy over to avoid interference if .off() in listener\n\n\n    listeners = listeners.slice(0);\n    args = args || []; // once stuff\n\n    var onceListeners = this._onceEvents && this._onceEvents[eventName];\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      var isOnce = onceListeners && onceListeners[listener];\n\n      if (isOnce) {\n        // remove listener\n        // remove before trigger to prevent recursion\n        this.off(eventName, listener); // unset once flag\n\n        delete onceListeners[listener];\n      } // trigger listener\n\n\n      listener.apply(this, args);\n    }\n\n    return this;\n  };\n\n  proto.allOff = function () {\n    delete this._events;\n    delete this._onceEvents;\n  };\n\n  return EvEmitter;\n});","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","var _require = require('events'),\n    EventEmitter = _require.EventEmitter;\n\nmodule.exports = function createInputEvents(opt) {\n  if (opt == null) opt = window;\n  if (isDOMNode(opt)) opt = {\n    target: opt\n  };\n  var _opt = opt,\n      _opt$target = _opt.target,\n      target = _opt$target === void 0 ? window : _opt$target,\n      _opt$parent = _opt.parent,\n      parent = _opt$parent === void 0 ? window : _opt$parent,\n      _opt$tapDistanceThres = _opt.tapDistanceThreshold,\n      tapDistanceThreshold = _opt$tapDistanceThres === void 0 ? 10 : _opt$tapDistanceThres,\n      _opt$tapDelay = _opt.tapDelay,\n      tapDelay = _opt$tapDelay === void 0 ? 300 : _opt$tapDelay,\n      _opt$preventDefault = _opt.preventDefault,\n      preventDefault = _opt$preventDefault === void 0 ? false : _opt$preventDefault,\n      _opt$filtered = _opt.filtered,\n      filtered = _opt$filtered === void 0 ? true : _opt$filtered,\n      _opt$passive = _opt.passive,\n      passive = _opt$passive === void 0 ? true : _opt$passive;\n  var eventOpts = passive ? {\n    passive: true\n  } : undefined;\n  var emitter = new EventEmitter();\n  var initialIdentifier;\n  var dragging = false;\n  var lastTime;\n  var lastPosition;\n  var attached = false;\n  attach();\n  emitter.enable = attach;\n  emitter.disable = detach;\n  Object.defineProperties(emitter, {\n    target: {\n      get: function get() {\n        return target;\n      }\n    },\n    parent: {\n      get: function get() {\n        return parent;\n      }\n    }\n  });\n  return emitter;\n\n  function mousedown(event) {\n    // mark the drag event as having started\n    dragging = true;\n    var touch = getCurrentEvent(event);\n    var result = createEvent(event, touch, target);\n    lastPosition = result.position.slice();\n    lastTime = Date.now();\n    emitter.emit('down', result);\n  }\n\n  function mouseup(event) {\n    var wasDragging = dragging;\n    var touch = getCurrentEvent(event);\n    var valid = true;\n\n    if (filtered && event.changedTouches && (!touch || touch.identifier !== initialIdentifier)) {\n      // skip entirely if this touch doesn't match expected\n      valid = false;\n    }\n\n    if (touch && valid) {\n      var result = createEvent(event, touch, target);\n      initialIdentifier = null;\n\n      if (wasDragging || result.inside) {\n        // If the interaction was or is inside, emit an event\n        emitter.emit('up', result);\n      }\n\n      if (lastPosition != null) {\n        var nowTime = Date.now();\n        var delta = nowTime - lastTime;\n        var dist = distance(result.position, lastPosition);\n\n        if (delta <= tapDelay && dist < tapDistanceThreshold) {\n          emitter.emit('tap', result);\n        }\n\n        lastPosition = null;\n      }\n\n      dragging = false;\n    }\n  }\n\n  function mousemove(event) {\n    var touch = getCurrentEvent(event);\n\n    if (touch) {\n      // we didn't have an identifier and now we do\n      if (filtered && event.changedTouches && touch.identifier != null) {\n        var bounds = getElementBounds(target);\n\n        if (isInsideBounds(touch, bounds)) {\n          // ensure dragging is set to true\n          dragging = true;\n        }\n      }\n\n      var result = createEvent(event, touch, target);\n\n      if (dragging || result.inside) {\n        emitter.emit('move', result);\n      }\n    }\n  }\n\n  function attach() {\n    if (attached) return;\n    attached = true;\n    target.addEventListener('touchstart', mousedown, eventOpts);\n    parent.addEventListener('touchend', mouseup, eventOpts);\n    parent.addEventListener('touchmove', mousemove, eventOpts);\n    target.addEventListener('mousedown', mousedown, eventOpts);\n    parent.addEventListener('mouseup', mouseup, eventOpts);\n    parent.addEventListener('mousemove', mousemove, eventOpts);\n\n    if (preventDefault) {\n      window.addEventListener('dragstart', preventDefaultEvent, {\n        passive: false\n      });\n      document.addEventListener('touchmove', preventDefaultEvent, {\n        passive: false\n      });\n    }\n  }\n\n  function detach() {\n    if (!attached) return;\n    attached = false;\n    target.removeEventListener('touchstart', mousedown);\n    parent.removeEventListener('touchend', mouseup);\n    parent.removeEventListener('touchmove', mousemove);\n    target.removeEventListener('mousedown', mousedown);\n    parent.removeEventListener('mouseup', mouseup);\n    parent.removeEventListener('mousemove', mousemove);\n\n    if (preventDefault) {\n      window.removeEventListener('dragstart', preventDefaultEvent);\n      document.removeEventListener('touchmove', preventDefaultEvent);\n    }\n  }\n\n  function preventDefaultEvent(ev) {\n    ev.preventDefault();\n    return false;\n  }\n\n  function getCurrentEvent(event) {\n    if (event.changedTouches) {\n      var list = event.changedTouches;\n\n      if (filtered) {\n        if (initialIdentifier == null) {\n          // first time tracking, mark identifier\n          var first = getFirstTargetTouch(list) || list[0];\n          initialIdentifier = first.identifier;\n          return first;\n        } else {\n          // identifier exists, try to get it\n          return getTouch(list, initialIdentifier);\n        }\n      } else {\n        return list[0];\n      }\n    } else {\n      return event;\n    }\n  }\n\n  function getFirstTargetTouch(touches) {\n    for (var i = 0; i < touches.length; i++) {\n      var t = touches[i];\n      if (t.target === target) return t;\n    }\n\n    return null;\n  }\n\n  function getTouch(touches, id) {\n    for (var i = 0; i < touches.length; i++) {\n      var t = touches[i];\n\n      if (t.identifier === id) {\n        return t;\n      }\n    }\n\n    return null;\n  }\n\n  function createEvent(event, touch, target) {\n    var bounds = getElementBounds(target);\n    var position = getPosition(touch, target, bounds);\n    var uv = getNormalizedPosition(position, bounds);\n    return {\n      dragging: dragging,\n      touch: touch,\n      inside: isInsideBounds(touch, bounds),\n      position: position,\n      uv: uv,\n      event: event,\n      bounds: bounds\n    };\n  }\n};\n\nfunction distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n\nfunction isInsideBounds(event, bounds) {\n  var clientX = event.clientX,\n      clientY = event.clientY;\n  return clientX >= bounds.left && clientX < bounds.right && clientY >= bounds.top && clientY < bounds.bottom;\n}\n\nfunction getNormalizedPosition(position, bounds) {\n  return [position[0] / bounds.width, position[1] / bounds.height];\n}\n\nfunction getPosition(event, target, bounds) {\n  var clientX = event.clientX,\n      clientY = event.clientY;\n  var x = clientX - bounds.left;\n  var y = clientY - bounds.top;\n  return [x, y];\n}\n\nfunction getElementBounds(element) {\n  if (element === window || element === document || element === document.body) {\n    return {\n      x: 0,\n      y: 0,\n      left: 0,\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n  } else {\n    return element.getBoundingClientRect();\n  }\n}\n\nfunction isDOMNode(obj) {\n  if (!obj || obj == null) return false;\n  var winEl = typeof window !== 'undefined' ? window : null;\n  return obj === winEl || typeof obj.nodeType === 'number' && typeof obj.nodeName === 'string';\n}","import { OrthographicCamera, PlaneBufferGeometry, Mesh } from \"../../../build/three.module.js\";\n\nfunction Pass() {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n}\n\nObject.assign(Pass.prototype, {\n  setSize: function setSize()\n  /* width, height */\n  {},\n  render: function render()\n  /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function FullScreenQuad(material) {\n    this._mesh = new Mesh(geometry, material);\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function get() {\n      return this._mesh.material;\n    },\n    set: function set(value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function dispose() {\n      this._mesh.geometry.dispose();\n    },\n    render: function render(renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n\nexport { Pass };","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\nvar CopyShader = {\n  uniforms: {\n    \"tDiffuse\": {\n      value: null\n    },\n    \"opacity\": {\n      value: 1.0\n    }\n  },\n  vertexShader: [\"varying vec2 vUv;\", \"void main() {\", \"\tvUv = uv;\", \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n  fragmentShader: [\"uniform float opacity;\", \"uniform sampler2D tDiffuse;\", \"varying vec2 vUv;\", \"void main() {\", \"\tvec4 texel = texture2D( tDiffuse, vUv );\", \"\tgl_FragColor = opacity * texel;\", \"}\"].join(\"\\n\")\n};\nexport { CopyShader };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { ShaderMaterial, UniformsUtils } from \"../../../build/three.module.js\";\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar ShaderPass = function ShaderPass(shader, textureID) {\n  Pass.call(this);\n  this.textureID = textureID !== undefined ? textureID : \"tDiffuse\";\n\n  if (shader instanceof ShaderMaterial) {\n    this.uniforms = shader.uniforms;\n    this.material = shader;\n  } else if (shader) {\n    this.uniforms = UniformsUtils.clone(shader.uniforms);\n    this.material = new ShaderMaterial({\n      defines: Object.assign({}, shader.defines),\n      uniforms: this.uniforms,\n      vertexShader: shader.vertexShader,\n      fragmentShader: shader.fragmentShader\n    });\n  }\n\n  this.fsQuad = new Pass.FullScreenQuad(this.material);\n};\n\nShaderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: ShaderPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    if (this.uniforms[this.textureID]) {\n      this.uniforms[this.textureID].value = readBuffer.texture;\n    }\n\n    this.fsQuad.material = this.material;\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n      if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n      this.fsQuad.render(renderer);\n    }\n  }\n});\nexport { ShaderPass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar MaskPass = function MaskPass(scene, camera) {\n  Pass.call(this);\n  this.scene = scene;\n  this.camera = camera;\n  this.clear = true;\n  this.needsSwap = false;\n  this.inverse = false;\n};\n\nMaskPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: MaskPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    var context = renderer.getContext();\n    var state = renderer.state; // don't update color or depth\n\n    state.buffers.color.setMask(false);\n    state.buffers.depth.setMask(false); // lock buffers\n\n    state.buffers.color.setLocked(true);\n    state.buffers.depth.setLocked(true); // set up stencil\n\n    var writeValue, clearValue;\n\n    if (this.inverse) {\n      writeValue = 0;\n      clearValue = 1;\n    } else {\n      writeValue = 1;\n      clearValue = 0;\n    }\n\n    state.buffers.stencil.setTest(true);\n    state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n    state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\n    state.buffers.stencil.setClear(clearValue);\n    state.buffers.stencil.setLocked(true); // draw into the stencil buffer\n\n    renderer.setRenderTarget(readBuffer);\n    if (this.clear) renderer.clear();\n    renderer.render(this.scene, this.camera);\n    renderer.setRenderTarget(writeBuffer);\n    if (this.clear) renderer.clear();\n    renderer.render(this.scene, this.camera); // unlock color and depth buffer for subsequent rendering\n\n    state.buffers.color.setLocked(false);\n    state.buffers.depth.setLocked(false); // only render where stencil is set to 1\n\n    state.buffers.stencil.setLocked(false);\n    state.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff); // draw if == 1\n\n    state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n    state.buffers.stencil.setLocked(true);\n  }\n});\n\nvar ClearMaskPass = function ClearMaskPass() {\n  Pass.call(this);\n  this.needsSwap = false;\n};\n\nClearMaskPass.prototype = Object.create(Pass.prototype);\nObject.assign(ClearMaskPass.prototype, {\n  render: function render(renderer\n  /*, writeBuffer, readBuffer, deltaTime, maskActive */\n  ) {\n    renderer.state.buffers.stencil.setLocked(false);\n    renderer.state.buffers.stencil.setTest(false);\n  }\n});\nexport { MaskPass, ClearMaskPass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Clock, LinearFilter, Mesh, OrthographicCamera, PlaneBufferGeometry, RGBAFormat, Vector2, WebGLRenderTarget } from \"../../../build/three.module.js\";\nimport { CopyShader } from \"../shaders/CopyShader.js\";\nimport { ShaderPass } from \"../postprocessing/ShaderPass.js\";\nimport { MaskPass } from \"../postprocessing/MaskPass.js\";\nimport { ClearMaskPass } from \"../postprocessing/MaskPass.js\";\n\nvar EffectComposer = function EffectComposer(renderer, renderTarget) {\n  this.renderer = renderer;\n\n  if (renderTarget === undefined) {\n    var parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBAFormat,\n      stencilBuffer: false\n    };\n    var size = renderer.getSize(new Vector2());\n    this._pixelRatio = renderer.getPixelRatio();\n    this._width = size.width;\n    this._height = size.height;\n    renderTarget = new WebGLRenderTarget(this._width * this._pixelRatio, this._height * this._pixelRatio, parameters);\n    renderTarget.texture.name = 'EffectComposer.rt1';\n  } else {\n    this._pixelRatio = 1;\n    this._width = renderTarget.width;\n    this._height = renderTarget.height;\n  }\n\n  this.renderTarget1 = renderTarget;\n  this.renderTarget2 = renderTarget.clone();\n  this.renderTarget2.texture.name = 'EffectComposer.rt2';\n  this.writeBuffer = this.renderTarget1;\n  this.readBuffer = this.renderTarget2;\n  this.renderToScreen = true;\n  this.passes = []; // dependencies\n\n  if (CopyShader === undefined) {\n    console.error('THREE.EffectComposer relies on CopyShader');\n  }\n\n  if (ShaderPass === undefined) {\n    console.error('THREE.EffectComposer relies on ShaderPass');\n  }\n\n  this.copyPass = new ShaderPass(CopyShader);\n  this.clock = new Clock();\n};\n\nObject.assign(EffectComposer.prototype, {\n  swapBuffers: function swapBuffers() {\n    var tmp = this.readBuffer;\n    this.readBuffer = this.writeBuffer;\n    this.writeBuffer = tmp;\n  },\n  addPass: function addPass(pass) {\n    this.passes.push(pass);\n    pass.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n  },\n  insertPass: function insertPass(pass, index) {\n    this.passes.splice(index, 0, pass);\n    pass.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n  },\n  isLastEnabledPass: function isLastEnabledPass(passIndex) {\n    for (var i = passIndex + 1; i < this.passes.length; i++) {\n      if (this.passes[i].enabled) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  render: function render(deltaTime) {\n    // deltaTime value is in seconds\n    if (deltaTime === undefined) {\n      deltaTime = this.clock.getDelta();\n    }\n\n    var currentRenderTarget = this.renderer.getRenderTarget();\n    var maskActive = false;\n    var pass,\n        i,\n        il = this.passes.length;\n\n    for (i = 0; i < il; i++) {\n      pass = this.passes[i];\n      if (pass.enabled === false) continue;\n      pass.renderToScreen = this.renderToScreen && this.isLastEnabledPass(i);\n      pass.render(this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive);\n\n      if (pass.needsSwap) {\n        if (maskActive) {\n          var context = this.renderer.getContext();\n          var stencil = this.renderer.state.buffers.stencil; //context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n          stencil.setFunc(context.NOTEQUAL, 1, 0xffffffff);\n          this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, deltaTime); //context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n          stencil.setFunc(context.EQUAL, 1, 0xffffffff);\n        }\n\n        this.swapBuffers();\n      }\n\n      if (MaskPass !== undefined) {\n        if (pass instanceof MaskPass) {\n          maskActive = true;\n        } else if (pass instanceof ClearMaskPass) {\n          maskActive = false;\n        }\n      }\n    }\n\n    this.renderer.setRenderTarget(currentRenderTarget);\n  },\n  reset: function reset(renderTarget) {\n    if (renderTarget === undefined) {\n      var size = this.renderer.getSize(new Vector2());\n      this._pixelRatio = this.renderer.getPixelRatio();\n      this._width = size.width;\n      this._height = size.height;\n      renderTarget = this.renderTarget1.clone();\n      renderTarget.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n    }\n\n    this.renderTarget1.dispose();\n    this.renderTarget2.dispose();\n    this.renderTarget1 = renderTarget;\n    this.renderTarget2 = renderTarget.clone();\n    this.writeBuffer = this.renderTarget1;\n    this.readBuffer = this.renderTarget2;\n  },\n  setSize: function setSize(width, height) {\n    this._width = width;\n    this._height = height;\n    var effectiveWidth = this._width * this._pixelRatio;\n    var effectiveHeight = this._height * this._pixelRatio;\n    this.renderTarget1.setSize(effectiveWidth, effectiveHeight);\n    this.renderTarget2.setSize(effectiveWidth, effectiveHeight);\n\n    for (var i = 0; i < this.passes.length; i++) {\n      this.passes[i].setSize(effectiveWidth, effectiveHeight);\n    }\n  },\n  setPixelRatio: function setPixelRatio(pixelRatio) {\n    this._pixelRatio = pixelRatio;\n    this.setSize(this._width, this._height);\n  }\n});\n\nvar Pass = function Pass() {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n};\n\nObject.assign(Pass.prototype, {\n  setSize: function setSize()\n  /* width, height */\n  {},\n  render: function render()\n  /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function FullScreenQuad(material) {\n    this._mesh = new Mesh(geometry, material);\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function get() {\n      return this._mesh.material;\n    },\n    set: function set(value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function dispose() {\n      this._mesh.geometry.dispose();\n    },\n    render: function render(renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n\nexport { EffectComposer, Pass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar RenderPass = function RenderPass(scene, camera, overrideMaterial, clearColor, clearAlpha) {\n  Pass.call(this);\n  this.scene = scene;\n  this.camera = camera;\n  this.overrideMaterial = overrideMaterial;\n  this.clearColor = clearColor;\n  this.clearAlpha = clearAlpha !== undefined ? clearAlpha : 0;\n  this.clear = true;\n  this.clearDepth = false;\n  this.needsSwap = false;\n};\n\nRenderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: RenderPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    var oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    var oldClearColor, oldClearAlpha, oldOverrideMaterial;\n\n    if (this.overrideMaterial !== undefined) {\n      oldOverrideMaterial = this.scene.overrideMaterial;\n      this.scene.overrideMaterial = this.overrideMaterial;\n    }\n\n    if (this.clearColor) {\n      oldClearColor = renderer.getClearColor().getHex();\n      oldClearAlpha = renderer.getClearAlpha();\n      renderer.setClearColor(this.clearColor, this.clearAlpha);\n    }\n\n    if (this.clearDepth) {\n      renderer.clearDepth();\n    }\n\n    renderer.setRenderTarget(this.renderToScreen ? null : readBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n    if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n    renderer.render(this.scene, this.camera);\n\n    if (this.clearColor) {\n      renderer.setClearColor(oldClearColor, oldClearAlpha);\n    }\n\n    if (this.overrideMaterial !== undefined) {\n      this.scene.overrideMaterial = oldOverrideMaterial;\n    }\n\n    renderer.autoClear = oldAutoClear;\n  }\n});\nexport { RenderPass };","import imagesLoaded from \"imagesloaded\"\nimport * as THREE from \"three\"\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\"\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\"\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\"\nimport createInputEvents from \"simple-input-events\"\nimport { lerp } from \"./assists/utils\"\n\nconst event = createInputEvents(window)\n\nlet docScroll\nconst getPageYScroll = () =>\n  (docScroll = window.pageYOffset || document.documentElement.scrollTop)\nwindow.addEventListener(\"scroll\", getPageYScroll)\n\n// calculate the viewport size\nlet winsize\nconst calcWinsize = () =>\n  (winsize = { width: window.innerWidth, height: window.innerHeight })\ncalcWinsize()\n// and recalculate on resize\nwindow.addEventListener(\"resize\", calcWinsize)\n\nwindow.onbeforeunload = function () {\n  window.scrollTo(0, 0)\n}\n\n//.............|   SCENE   |................\nlet scene = new THREE.Scene()\nlet renderer = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n})\nrenderer.setPixelRatio(1)\nrenderer.setSize(window.innerWidth, window.innerHeight)\nrenderer.sortObjects = false\nrenderer.outputEncoding = THREE.sRGBEncoding\n\nlet camera = new THREE.PerspectiveCamera(\n  70,\n  window.innerWidth / window.innerHeight,\n  100,\n  1000\n)\n\nlet cameraDistance = 400\ncamera.position.set(0, 0, cameraDistance)\ncamera.lookAt(0, 0, 0)\nlet time = 0\nlet speed = 0\nlet targetSpeed = 0\nlet mouse = new THREE.Vector2()\nlet followMouse = new THREE.Vector2()\nlet prevMouse = new THREE.Vector2()\n\nwindow.addEventListener(\"resize\", _resize.bind(this))\n\nlet composer = new EffectComposer(renderer)\nlet renderPass = new RenderPass(scene, camera)\ncomposer.addPass(renderPass)\n\n//custom shader pass\nlet myEffect = {\n  uniforms: {\n    tDiffuse: { value: null },\n    distort: { value: 0 },\n    resolution: {\n      value: new THREE.Vector2(1, window.innerHeight / window.innerWidth),\n    },\n    uMouse: { value: new THREE.Vector2(-10, -10) },\n    uVelo: { value: 0 },\n    uScale: { value: 0 },\n    uType: { value: 0 },\n    time: { value: 0 },\n  },\n  vertexShader: `\n            uniform float time;\n            uniform float progress;\n            uniform vec2 resolution;\n            varying vec2 vUv;\n            uniform sampler2D texture1;\n            \n            const float pi = 3.1415925;\n            \n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n            }\n        `,\n  fragmentShader: `\n            uniform float time;\n            uniform float progress;\n            uniform sampler2D tDiffuse;\n            uniform vec2 resolution;\n            varying vec2 vUv;\n            uniform vec2 uMouse;\n            uniform float uVelo;\n            uniform int uType;\n            \n            \n            float circle(vec2 uv, vec2 disc_center, float disc_radius, float border_size) {\n            uv -= disc_center;\n            uv*=resolution;\n            float dist = sqrt(dot(uv, uv));\n                return smoothstep(disc_radius+border_size, disc_radius-border_size, dist);\n            }\n            \n            float map(float value, float min1, float max1, float min2, float max2) {\n                return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n            }\n            \n            float remap(float value, float inMin, float inMax, float outMin, float outMax) {\n                return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n            }\n            \n            float hash12(vec2 p) {\n                float h = dot(p,vec2(127.1,311.7));\n                return fract(sin(h)*43758.5453123);\n            }\n            \n            // #define HASHSCALE3 vec3(.1031, .1030, .0973)\n            vec2 hash2d(vec2 p)\n            {\n            vec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n                p3 += dot(p3, p3.yzx+19.19);\n                return fract((p3.xx+p3.yz)*p3.zy);\n            }\n            \n            \n            \n            \n            void main(){\n                vec2 newUV = vUv;\n                vec4 color = vec4(1.,0.,0.,1.);\n                \n                // colorful\n                if(uType==0){\n                    float c = circle(newUV, uMouse, 0.0, 0.2);\n                    float r = texture2D(tDiffuse, newUV.xy += c * (uVelo * .5)).x;\n                    float g = texture2D(tDiffuse, newUV.xy += c * (uVelo * .525)).y;\n                    float b = texture2D(tDiffuse, newUV.xy += c * (uVelo * .55)).z;\n                    color = vec4(r, g, b, 1.);\n                }\n            \n                gl_FragColor = color;\n            }\n        `,\n}\n\nlet customPass = new ShaderPass(myEffect)\ncustomPass.renderToScreen = true\ncomposer.addPass(customPass)\n\nevent.on(\"move\", ({ position, event, inside, dragging }) => {\n  // mousemove / touchmove\n  mouse.x = position[0] / window.innerWidth\n  mouse.y = 1 - position[1] / window.innerHeight\n})\n\nlet geometry = new THREE.PlaneBufferGeometry(1, 1, 80, 80)\nlet material = new THREE.ShaderMaterial({\n  extensions: {\n    derivatives: \"#extension GL_OES_standard_derivatives : enable\",\n  },\n  side: THREE.DoubleSide,\n  uniforms: {\n    time: { type: \"f\", value: 0 },\n    progress: { type: \"f\", value: 0 },\n    angle: { type: \"f\", value: 0 },\n    texture1: { type: \"t\", value: null },\n    texture2: { type: \"t\", value: null },\n    resolution: { type: \"v4\", value: new THREE.Vector4() },\n    uvRate1: {\n      value: new THREE.Vector2(1, 1),\n    },\n  },\n  transparent: true,\n  vertexShader: `\n            uniform float time;\n            uniform float progress;\n            uniform vec4 resolution;\n            varying vec2 vUv;\n            uniform sampler2D texture1;\n            \n            const float pi = 3.1415925;\n            \n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n            }\n        `,\n  fragmentShader: `\n            uniform float time;\n            uniform float progress;\n            uniform sampler2D texture1;\n            uniform vec4 resolution;\n            varying vec2 vUv;\n            \n            \n            void main(){\n                vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);\n                // newUV.x += 0.02*sin(newUV.y*20. + time);\n                gl_FragColor = texture2D(texture1,newUV);\n            }\n        `,\n})\n\nfunction _resize() {\n  let width = window.innerWidth\n  let height = window.innerHeight\n  renderer.setSize(width, height)\n  camera.aspect = width / height\n  camera.fov =\n    2 *\n    Math.atan(width / camera.aspect / (2 * cameraDistance)) *\n    (180 / Math.PI) // in degrees\n  customPass.uniforms.resolution.value.y = height / width\n  camera.updateProjectionMatrix()\n}\n\nfunction getSpeed() {\n  speed = Math.sqrt((prevMouse.x - mouse.x) ** 2 + (prevMouse.y - mouse.y) ** 2)\n\n  targetSpeed -= 0.1 * (targetSpeed - speed)\n  followMouse.x -= 0.1 * (followMouse.x - mouse.x)\n  followMouse.y -= 0.1 * (followMouse.y - mouse.y)\n\n  prevMouse.x = mouse.x\n  prevMouse.y = mouse.y\n}\n\nfunction render() {\n  time += 0.05\n  getSpeed()\n  scene.children.forEach(m => {\n    if (m.material.uniforms) {\n      m.material.uniforms.time.value = time\n    }\n  })\n  customPass.uniforms.time.value = time\n  customPass.uniforms.uMouse.value = followMouse\n  customPass.uniforms.uVelo.value = Math.min(targetSpeed, 0.05)\n  targetSpeed *= 0.999\n  // let renderer.render(let scene, let camera);\n  if (composer) composer.render()\n}\nrender()\n\nfunction createMesh(o) {\n  material = material.clone()\n  let texture = new THREE.Texture(o.image)\n  texture.needsUpdate = true\n  // image cover\n  let imageAspect = o.iHeight / o.iWidth\n  let a1\n  let a2\n  if (o.height / o.width > imageAspect) {\n    a1 = (o.width / o.height) * imageAspect\n    a2 = 1\n  } else {\n    a1 = 1\n    a2 = o.height / o.width / imageAspect\n  }\n  texture.minFilter = THREE.LinearFilter\n  material.uniforms.resolution.value.x = o.width\n  material.uniforms.resolution.value.y = o.height\n  material.uniforms.resolution.value.z = a1\n  material.uniforms.resolution.value.w = a2\n  material.uniforms.progress.value = 0\n  material.uniforms.angle.value = 0.3\n\n  material.uniforms.texture1.value = texture\n  material.uniforms.texture1.value.needsUpdate = true\n\n  let mesh = new THREE.Mesh(geometry, material)\n\n  mesh.scale.set(o.width, o.height, o.width / 2)\n\n  return mesh\n}\n\nfunction Item(image, scroll) {\n  let currentScroll = docScroll\n  let shouldRollBack = false\n  let shouldUnRoll = false\n  let positions = []\n\n  let container = document.getElementById(\"pic-container\")\n  container.appendChild(renderer.domElement)\n\n  //..........................................\n  //..........................................\n  // set the initial values\n  let bounds\n  let fromTop\n  let windowHeight\n  let withoutHeight\n  let withHeight\n  let insideTop\n  let insideRealTop\n  let insideBottom\n  let width\n  let height\n  let left\n  function getSize() {\n    bounds = image.getBoundingClientRect()\n    fromTop = bounds.top\n    windowHeight = window.innerHeight\n    withoutHeight = fromTop - windowHeight\n    withHeight = fromTop + bounds.height\n    insideTop = withoutHeight - docScroll\n    insideRealTop = fromTop + docScroll\n    insideBottom = withHeight - docScroll + 50\n    width = bounds.width\n    height = bounds.height\n    left = bounds.left\n  }\n  getSize()\n\n  let mesh = createMesh({\n    width: width,\n    height: height,\n    image: image,\n    iWidth: image.width,\n    iHeight: image.height,\n  })\n  scene.add(mesh)\n  // use the IntersectionObserver API to check when the element is inside the viewport\n  // only then the element translation will be updated\n  let options = {\n    root: null,\n    rootMargin: \"0px\",\n    threshold: [0, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1],\n  }\n  let observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      positions.push(entry.boundingClientRect.y)\n      let compareArray = positions.slice(positions.length - 2, positions.length)\n      let down = compareArray[0] > compareArray[1]\n\n      let isVisible = entry.intersectionRatio > 0.0\n\n      shouldRollBack = false\n      shouldUnRoll = false\n      if (\n        entry.intersectionRatio < 0.5 &&\n        entry.boundingClientRect.y > 0 &&\n        isVisible &&\n        !down\n      ) {\n        shouldRollBack = true\n      }\n\n      if (\n        entry.intersectionRatio > 0.5 &&\n        entry.boundingClientRect.y > 0 &&\n        isVisible\n      ) {\n        shouldUnRoll = true\n      }\n      console.log(isVisible, \"vis\")\n      mesh.visible = isVisible\n    })\n  }, options)\n  observer.observe(image)\n  // init/bind events\n  function resize() {\n    getSize()\n    mesh.scale.set(width, height, 200)\n    // onSetPosition(scroll.renderedStyles.translationY.current)\n    scroll.shouldRender = true\n  }\n  window.addEventListener(\"resize\", () => resize())\n\n  function onSetPosition(currentScroll) {\n    mesh.position.y =\n      currentScroll + winsize.height / 2 - insideRealTop - height / 2\n    mesh.position.x = 0 - winsize.width / 2 + left + width / 2\n  }\n  onSetPosition(0)\n}\n\nfunction SmoothScroll(image) {\n  let shouldRender = false\n  // the <main> element\n  // const DOM = { main: document.getElementById(\"___gatsby\") }\n  // the scrollable element\n  // we translate this element when scrolling (y-axis)\n  // DOM.scrollable = DOM.main.querySelector(\"main\")\n  let picItem = new Item(image, this)\n\n  document.addEventListener(\"mousemove\", () => {\n    shouldRender = true\n  })\n\n  // here we define which property will change as we scroll the page\n  // in this case we will be translating on the y-axis\n  // we interpolate between the previous and current value to achieve the smooth scrolling effect\n  let renderedStyles = {\n    translationY: {\n      // interpolated value\n      previous: 0,\n      // current value\n      current: 0,\n      // amount to interpolate\n      ease: 0.1,\n      // current value setter\n      // in this case the value of the translation will be the same like the document scroll\n      setValue: () => docScroll,\n    },\n  }\n  // set the body's height\n  // function setSize() {\n  // document.body.style.height = `${DOM.scrollable.scrollHeight}px`;\n  // }\n  // setSize()\n  // set the initial values\n  // for (const key in renderedStyles) {\n  //   renderedStyles[key].current = renderedStyles[key].previous = renderedStyles[key].setValue()\n  // }\n  // translate the scrollable element\n  function setPosition() {\n    // translates the scrollable element\n    if (\n      Math.round(renderedStyles.translationY.previous) !==\n        Math.round(renderedStyles.translationY.current) ||\n      renderedStyles.translationY.previous < 10\n    ) {\n      shouldRender = true\n      // DOM.scrollable.style.transform = `translate3d(0,${-1 *\n      //   renderedStyles.translationY.previous}px,0)`;\n      if (picItem.isVisible || picItem.isBeingAnimatedNow) {\n        picItem.render(renderedStyles.translationY.previous)\n      }\n    }\n    if (targetSpeed > 0.01) shouldRender = true\n\n    if (shouldRender) {\n      shouldRender = false\n      render()\n    }\n  }\n  setPosition()\n  shouldRender = true\n\n  // the <main> element's style needs to be modified\n  // DOM.main.style.position = \"fixed\";\n  // DOM.main.style.width = DOM.main.style.height = \"100%\";\n  // DOM.main.style.top = DOM.main.style.left = 0;\n  // DOM.main.style.overflow = \"hidden\";\n  // init/bind events\n  // window.addEventListener(\"resize\", () => setSize());\n  // start the render loop\n  requestAnimationFrame(() => onRenderStyles())\n\n  function onRenderStyles() {\n    // update the current and interpolated values\n    for (const key in renderedStyles) {\n      renderedStyles[key].current = renderedStyles[key].setValue()\n      renderedStyles[key].previous = lerp(\n        renderedStyles[key].previous,\n        renderedStyles[key].current,\n        renderedStyles[key].ease\n      )\n    }\n    setPosition()\n    requestAnimationFrame(() => onRenderStyles())\n  }\n}\n\nexport function PictureAnimation() {\n  const image = imagesLoaded(document.getElementById(\"my-picture\"), {\n    background: true,\n  }).images[0].img\n  const wrapper = document.querySelector(\".pic-wrapper\")\n  wrapper.classList.remove(\"loading\")\n  wrapper.classList.add(\"loaded\")\n\n  // Get the scroll position\n  getPageYScroll()\n  // Initialize the Smooth Scrolling\n  new SmoothScroll(image)\n}\n","// Map number x from range [a, b] to [c, d]\nconst map = (x, a, b, c, d) => ((x - a) * (d - c)) / (b - a) + c\n\n// Linear interpolation\nconst lerp = (a, b, n) => (1 - n) * a + n * b\n\nconst clamp = (num, min, max) => (num <= min ? min : num >= max ? max : num)\n\n// Gets the mouse position\nconst getMousePos = e => {\n  let posx = 0\n  let posy = 0\n  if (!e) e = window.event\n  if (e.pageX || e.pageY) {\n    posx = e.pageX\n    posy = e.pageY\n  } else if (e.clientX || e.clientY) {\n    posx =\n      e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft\n    posy =\n      e.clientY + document.body.scrollTop + document.documentElement.scrollTop\n  }\n\n  return { x: posx, y: posy }\n}\n\n// Generate a random float.\nconst getRandomFloat = (min, max) =>\n  (Math.random() * (max - min) + min).toFixed(2)\n\nexport { map, lerp, clamp, getMousePos, getRandomFloat }\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n(function (window, factory) {\n  'use strict'; // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define(['ev-emitter/ev-emitter'], function (EvEmitter) {\n      return factory(window, EvEmitter);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('ev-emitter'));\n  } else {\n    // browser global\n    window.imagesLoaded = factory(window, window.EvEmitter);\n  }\n})(typeof window !== 'undefined' ? window : this, // --------------------------  factory -------------------------- //\nfunction factory(window, EvEmitter) {\n  'use strict';\n\n  var $ = window.jQuery;\n  var console = window.console; // -------------------------- helpers -------------------------- //\n  // extend objects\n\n  function extend(a, b) {\n    for (var prop in b) {\n      a[prop] = b[prop];\n    }\n\n    return a;\n  }\n\n  var arraySlice = Array.prototype.slice; // turn element or nodeList into an array\n\n  function makeArray(obj) {\n    if (Array.isArray(obj)) {\n      // use object if already an array\n      return obj;\n    }\n\n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n\n    if (isArrayLike) {\n      // convert nodeList to array\n      return arraySlice.call(obj);\n    } // array of single index\n\n\n    return [obj];\n  } // -------------------------- imagesLoaded -------------------------- //\n\n  /**\n   * @param {Array, Element, NodeList, String} elem\n   * @param {Object or Function} options - if function, use as callback\n   * @param {Function} onAlways - callback function\n   */\n\n\n  function ImagesLoaded(elem, options, onAlways) {\n    // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n    if (!(this instanceof ImagesLoaded)) {\n      return new ImagesLoaded(elem, options, onAlways);\n    } // use elem as selector string\n\n\n    var queryElem = elem;\n\n    if (typeof elem == 'string') {\n      queryElem = document.querySelectorAll(elem);\n    } // bail if bad element\n\n\n    if (!queryElem) {\n      console.error('Bad element for imagesLoaded ' + (queryElem || elem));\n      return;\n    }\n\n    this.elements = makeArray(queryElem);\n    this.options = extend({}, this.options); // shift arguments if no options set\n\n    if (typeof options == 'function') {\n      onAlways = options;\n    } else {\n      extend(this.options, options);\n    }\n\n    if (onAlways) {\n      this.on('always', onAlways);\n    }\n\n    this.getImages();\n\n    if ($) {\n      // add jQuery Deferred object\n      this.jqDeferred = new $.Deferred();\n    } // HACK check async to allow time to bind listeners\n\n\n    setTimeout(this.check.bind(this));\n  }\n\n  ImagesLoaded.prototype = Object.create(EvEmitter.prototype);\n  ImagesLoaded.prototype.options = {};\n\n  ImagesLoaded.prototype.getImages = function () {\n    this.images = []; // filter & find items if we have an item selector\n\n    this.elements.forEach(this.addElementImages, this);\n  };\n  /**\n   * @param {Node} element\n   */\n\n\n  ImagesLoaded.prototype.addElementImages = function (elem) {\n    // filter siblings\n    if (elem.nodeName == 'IMG') {\n      this.addImage(elem);\n    } // get background image on element\n\n\n    if (this.options.background === true) {\n      this.addElementBackgroundImages(elem);\n    } // find children\n    // no non-element nodes, #143\n\n\n    var nodeType = elem.nodeType;\n\n    if (!nodeType || !elementNodeTypes[nodeType]) {\n      return;\n    }\n\n    var childImgs = elem.querySelectorAll('img'); // concat childElems to filterFound array\n\n    for (var i = 0; i < childImgs.length; i++) {\n      var img = childImgs[i];\n      this.addImage(img);\n    } // get child background images\n\n\n    if (typeof this.options.background == 'string') {\n      var children = elem.querySelectorAll(this.options.background);\n\n      for (i = 0; i < children.length; i++) {\n        var child = children[i];\n        this.addElementBackgroundImages(child);\n      }\n    }\n  };\n\n  var elementNodeTypes = {\n    1: true,\n    9: true,\n    11: true\n  };\n\n  ImagesLoaded.prototype.addElementBackgroundImages = function (elem) {\n    var style = getComputedStyle(elem);\n\n    if (!style) {\n      // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n      return;\n    } // get url inside url(\"...\")\n\n\n    var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n    var matches = reURL.exec(style.backgroundImage);\n\n    while (matches !== null) {\n      var url = matches && matches[2];\n\n      if (url) {\n        this.addBackground(url, elem);\n      }\n\n      matches = reURL.exec(style.backgroundImage);\n    }\n  };\n  /**\n   * @param {Image} img\n   */\n\n\n  ImagesLoaded.prototype.addImage = function (img) {\n    var loadingImage = new LoadingImage(img);\n    this.images.push(loadingImage);\n  };\n\n  ImagesLoaded.prototype.addBackground = function (url, elem) {\n    var background = new Background(url, elem);\n    this.images.push(background);\n  };\n\n  ImagesLoaded.prototype.check = function () {\n    var _this = this;\n\n    this.progressedCount = 0;\n    this.hasAnyBroken = false; // complete if no images\n\n    if (!this.images.length) {\n      this.complete();\n      return;\n    }\n\n    function onProgress(image, elem, message) {\n      // HACK - Chrome triggers event before object properties have changed. #83\n      setTimeout(function () {\n        _this.progress(image, elem, message);\n      });\n    }\n\n    this.images.forEach(function (loadingImage) {\n      loadingImage.once('progress', onProgress);\n      loadingImage.check();\n    });\n  };\n\n  ImagesLoaded.prototype.progress = function (image, elem, message) {\n    this.progressedCount++;\n    this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded; // progress event\n\n    this.emitEvent('progress', [this, image, elem]);\n\n    if (this.jqDeferred && this.jqDeferred.notify) {\n      this.jqDeferred.notify(this, image);\n    } // check if completed\n\n\n    if (this.progressedCount == this.images.length) {\n      this.complete();\n    }\n\n    if (this.options.debug && console) {\n      console.log('progress: ' + message, image, elem);\n    }\n  };\n\n  ImagesLoaded.prototype.complete = function () {\n    var eventName = this.hasAnyBroken ? 'fail' : 'done';\n    this.isComplete = true;\n    this.emitEvent(eventName, [this]);\n    this.emitEvent('always', [this]);\n\n    if (this.jqDeferred) {\n      var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n      this.jqDeferred[jqMethod](this);\n    }\n  }; // --------------------------  -------------------------- //\n\n\n  function LoadingImage(img) {\n    this.img = img;\n  }\n\n  LoadingImage.prototype = Object.create(EvEmitter.prototype);\n\n  LoadingImage.prototype.check = function () {\n    // If complete is true and browser supports natural sizes,\n    // try to check for image status manually.\n    var isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      // report based on naturalWidth\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      return;\n    } // If none of the checks above matched, simulate loading on detached element.\n\n\n    this.proxyImage = new Image();\n    this.proxyImage.addEventListener('load', this);\n    this.proxyImage.addEventListener('error', this); // bind to image as well for Firefox. #191\n\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.proxyImage.src = this.img.src;\n  };\n\n  LoadingImage.prototype.getIsImageComplete = function () {\n    // check for non-zero, non-undefined naturalWidth\n    // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n    return this.img.complete && this.img.naturalWidth;\n  };\n\n  LoadingImage.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    this.emitEvent('progress', [this, this.img, message]);\n  }; // ----- events ----- //\n  // trigger specified handler for event type\n\n\n  LoadingImage.prototype.handleEvent = function (event) {\n    var method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  LoadingImage.prototype.onload = function () {\n    this.confirm(true, 'onload');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.onerror = function () {\n    this.confirm(false, 'onerror');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.unbindEvents = function () {\n    this.proxyImage.removeEventListener('load', this);\n    this.proxyImage.removeEventListener('error', this);\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  }; // -------------------------- Background -------------------------- //\n\n\n  function Background(url, element) {\n    this.url = url;\n    this.element = element;\n    this.img = new Image();\n  } // inherit LoadingImage prototype\n\n\n  Background.prototype = Object.create(LoadingImage.prototype);\n\n  Background.prototype.check = function () {\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.img.src = this.url; // check if image is already complete\n\n    var isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      this.unbindEvents();\n    }\n  };\n\n  Background.prototype.unbindEvents = function () {\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  };\n\n  Background.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    this.emitEvent('progress', [this, this.element, message]);\n  }; // -------------------------- jQuery -------------------------- //\n\n\n  ImagesLoaded.makeJQueryPlugin = function (jQuery) {\n    jQuery = jQuery || window.jQuery;\n\n    if (!jQuery) {\n      return;\n    } // set local variable\n\n\n    $ = jQuery; // $().imagesLoaded()\n\n    $.fn.imagesLoaded = function (options, callback) {\n      var instance = new ImagesLoaded(this, options, callback);\n      return instance.jqDeferred.promise($(this));\n    };\n  }; // try making plugin\n\n\n  ImagesLoaded.makeJQueryPlugin(); // --------------------------  -------------------------- //\n\n  return ImagesLoaded;\n});"],"sourceRoot":""}