{"version":3,"sources":["webpack:///./node_modules/events/events.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/ev-emitter/ev-emitter.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/simple-input-events/simple-input-events.js","webpack:///./node_modules/three/examples/jsm/postprocessing/Pass.js","webpack:///./node_modules/three/examples/jsm/shaders/CopyShader.js","webpack:///./node_modules/three/examples/jsm/postprocessing/ShaderPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/MaskPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/EffectComposer.js","webpack:///./node_modules/three/examples/jsm/postprocessing/RenderPass.js","webpack:///./src/animations/pictureAnimation.js","webpack:///./src/animations/assists/utils.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/imagesloaded/imagesloaded.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","_classCallCheck","instance","Constructor","window","EvEmitter","proto","eventName","indexOf","onceEvents","_onceEvents","splice","emitEvent","onceListeners","allOff","_assertThisInitialized","self","ReferenceError","_inherits","subClass","superClass","constructor","writable","configurable","isInsideBounds","event","bounds","clientX","clientY","left","right","top","bottom","getElementBounds","element","document","body","x","y","innerWidth","innerHeight","width","height","getBoundingClientRect","opt","obj","winEl","nodeType","nodeName","isDOMNode","initialIdentifier","lastTime","lastPosition","_opt","_opt$target","_opt$parent","parent","_opt$tapDistanceThres","tapDistanceThreshold","_opt$tapDelay","tapDelay","_opt$preventDefault","preventDefault","_opt$filtered","filtered","_opt$passive","passive","eventOpts","dragging","attached","attach","enable","disable","mousedown","mouseup","mousemove","preventDefaultEvent","defineProperties","result","createEvent","getCurrentEvent","Date","now","a","b","wasDragging","touch","valid","changedTouches","identifier","inside","delta","dist","Math","sqrt","ev","first","touches","t","getFirstTargetTouch","id","getTouch","getPosition","uv","getNormalizedPosition","camera","geometry","FullScreenQuad","CopyShader","uniforms","vertexShader","join","fragmentShader","Pass","enabled","needsSwap","clear","renderToScreen","assign","setSize","render","material","_mesh","dispose","renderer","shader","textureID","clone","defines","fsQuad","writeBuffer","readBuffer","texture","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","scene","inverse","writeValue","clearValue","getContext","buffers","color","setMask","depth","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","renderTarget","parameters","minFilter","magFilter","format","stencilBuffer","size","getSize","_pixelRatio","getPixelRatio","_width","_height","renderTarget1","renderTarget2","passes","copyPass","clock","swapBuffers","tmp","addPass","pass","insertPass","isLastEnabledPass","passIndex","deltaTime","getDelta","currentRenderTarget","getRenderTarget","maskActive","il","NOTEQUAL","reset","effectiveWidth","effectiveHeight","setPixelRatio","pixelRatio","overrideMaterial","clearColor","clearAlpha","clearDepth","oldClearColor","oldClearAlpha","oldOverrideMaterial","oldAutoClear","autoClear","getClearColor","getHex","getClearAlpha","setClearColor","docScroll","winsize","createInputEvents","getPageYScroll","pageYOffset","documentElement","scrollTop","calcWinsize","onbeforeunload","scrollTo","THREE","antialias","alpha","sortObjects","outputEncoding","lookAt","time","speed","targetSpeed","mouse","followMouse","prevMouse","aspect","fov","atan","PI","customPass","resolution","updateProjectionMatrix","composer","EffectComposer","renderPass","RenderPass","myEffect","tDiffuse","distort","uMouse","uVelo","uScale","uType","ShaderPass","extensions","derivatives","side","progress","angle","texture1","texture2","uvRate1","transparent","children","forEach","min","Item","image","scroll","fromTop","windowHeight","withoutHeight","withHeight","insideRealTop","positions","getElementById","appendChild","domElement","mesh","o","needsUpdate","a1","a2","imageAspect","iHeight","iWidth","z","scale","createMesh","add","IntersectionObserver","entries","entry","boundingClientRect","compareArray","down","isVisible","intersectionRatio","log","visible","root","rootMargin","threshold","observe","shouldRender","currentScroll","onSetPosition","SmoothScroll","picItem","renderedStyles","translationY","previous","current","ease","setValue","setPosition","round","isBeingAnimatedNow","requestAnimationFrame","onRenderStyles","lerp","PictureAnimation","imagesLoaded","background","images","img","wrapper","querySelector","classList","remove","map","c","d","clamp","num","max","getMousePos","e","posx","posy","pageX","pageY","scrollLeft","_getPrototypeOf","setPrototypeOf","__proto__","_typeof","Symbol","iterator","_possibleConstructorReturn","assertThisInitialized","_defineProperty","factory","$","jQuery","extend","prop","arraySlice","ImagesLoaded","elem","options","onAlways","queryElem","querySelectorAll","elements","isArray","getImages","jqDeferred","Deferred","setTimeout","check","addElementImages","addImage","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","url","Image","style","getComputedStyle","reURL","matches","exec","backgroundImage","addBackground","loadingImage","_this","onProgress","progressedCount","hasAnyBroken","complete","isLoaded","notify","debug","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","src","handleEvent","method","onload","unbindEvents","onerror","makeJQueryPlugin","fn","callback","promise","_defineProperties","props","descriptor","_createClass","protoProps","staticProps"],"mappings":"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","file":"14-ee0068018443c307b45e.js","sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\n\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\nmodule.exports = EventEmitter;\nmodule.exports.once = once; // Backwards-compat with node 0.10.x\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\n\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function get() {\n    return defaultMaxListeners;\n  },\n  set: function set(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}; // Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\n\n\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(arguments[i]);\n  }\n\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    } // At least give some kind of context to the user\n\n\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n\n    for (var i = 0; i < len; ++i) {\n      ReflectApply(listeners[i], this, args);\n    }\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n\n      events = target._events;\n    }\n\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    } // Check for listener leak\n\n\n    m = _getMaxListeners(target);\n\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true; // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n}; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n\n    return this;\n  } // emit removeListener for all listeners on all events\n\n\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\n\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    copy[i] = arr[i];\n  }\n\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n\n      resolve([].slice.call(arguments));\n    }\n\n    ;\n    eventTargetAgnosticAddListener(emitter, name, resolver, {\n      once: true\n    });\n\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, {\n        once: true\n      });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n(function (global, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /* globals define, module, window */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define(factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n})(typeof window != 'undefined' ? window : this, function () {\n  \"use strict\";\n\n  function EvEmitter() {}\n\n  var proto = EvEmitter.prototype;\n\n  proto.on = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    } // set events hash\n\n\n    var events = this._events = this._events || {}; // set listeners array\n\n    var listeners = events[eventName] = events[eventName] || []; // only add once\n\n    if (listeners.indexOf(listener) == -1) {\n      listeners.push(listener);\n    }\n\n    return this;\n  };\n\n  proto.once = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    } // add event\n\n\n    this.on(eventName, listener); // set once flag\n    // set onceEvents hash\n\n    var onceEvents = this._onceEvents = this._onceEvents || {}; // set onceListeners object\n\n    var onceListeners = onceEvents[eventName] = onceEvents[eventName] || {}; // set flag\n\n    onceListeners[listener] = true;\n    return this;\n  };\n\n  proto.off = function (eventName, listener) {\n    var listeners = this._events && this._events[eventName];\n\n    if (!listeners || !listeners.length) {\n      return;\n    }\n\n    var index = listeners.indexOf(listener);\n\n    if (index != -1) {\n      listeners.splice(index, 1);\n    }\n\n    return this;\n  };\n\n  proto.emitEvent = function (eventName, args) {\n    var listeners = this._events && this._events[eventName];\n\n    if (!listeners || !listeners.length) {\n      return;\n    } // copy over to avoid interference if .off() in listener\n\n\n    listeners = listeners.slice(0);\n    args = args || []; // once stuff\n\n    var onceListeners = this._onceEvents && this._onceEvents[eventName];\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      var isOnce = onceListeners && onceListeners[listener];\n\n      if (isOnce) {\n        // remove listener\n        // remove before trigger to prevent recursion\n        this.off(eventName, listener); // unset once flag\n\n        delete onceListeners[listener];\n      } // trigger listener\n\n\n      listener.apply(this, args);\n    }\n\n    return this;\n  };\n\n  proto.allOff = function () {\n    delete this._events;\n    delete this._onceEvents;\n  };\n\n  return EvEmitter;\n});","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","var _require = require('events'),\n    EventEmitter = _require.EventEmitter;\n\nmodule.exports = function createInputEvents(opt) {\n  if (opt == null) opt = window;\n  if (isDOMNode(opt)) opt = {\n    target: opt\n  };\n  var _opt = opt,\n      _opt$target = _opt.target,\n      target = _opt$target === void 0 ? window : _opt$target,\n      _opt$parent = _opt.parent,\n      parent = _opt$parent === void 0 ? window : _opt$parent,\n      _opt$tapDistanceThres = _opt.tapDistanceThreshold,\n      tapDistanceThreshold = _opt$tapDistanceThres === void 0 ? 10 : _opt$tapDistanceThres,\n      _opt$tapDelay = _opt.tapDelay,\n      tapDelay = _opt$tapDelay === void 0 ? 300 : _opt$tapDelay,\n      _opt$preventDefault = _opt.preventDefault,\n      preventDefault = _opt$preventDefault === void 0 ? false : _opt$preventDefault,\n      _opt$filtered = _opt.filtered,\n      filtered = _opt$filtered === void 0 ? true : _opt$filtered,\n      _opt$passive = _opt.passive,\n      passive = _opt$passive === void 0 ? true : _opt$passive;\n  var eventOpts = passive ? {\n    passive: true\n  } : undefined;\n  var emitter = new EventEmitter();\n  var initialIdentifier;\n  var dragging = false;\n  var lastTime;\n  var lastPosition;\n  var attached = false;\n  attach();\n  emitter.enable = attach;\n  emitter.disable = detach;\n  Object.defineProperties(emitter, {\n    target: {\n      get: function get() {\n        return target;\n      }\n    },\n    parent: {\n      get: function get() {\n        return parent;\n      }\n    }\n  });\n  return emitter;\n\n  function mousedown(event) {\n    // mark the drag event as having started\n    dragging = true;\n    var touch = getCurrentEvent(event);\n    var result = createEvent(event, touch, target);\n    lastPosition = result.position.slice();\n    lastTime = Date.now();\n    emitter.emit('down', result);\n  }\n\n  function mouseup(event) {\n    var wasDragging = dragging;\n    var touch = getCurrentEvent(event);\n    var valid = true;\n\n    if (filtered && event.changedTouches && (!touch || touch.identifier !== initialIdentifier)) {\n      // skip entirely if this touch doesn't match expected\n      valid = false;\n    }\n\n    if (touch && valid) {\n      var result = createEvent(event, touch, target);\n      initialIdentifier = null;\n\n      if (wasDragging || result.inside) {\n        // If the interaction was or is inside, emit an event\n        emitter.emit('up', result);\n      }\n\n      if (lastPosition != null) {\n        var nowTime = Date.now();\n        var delta = nowTime - lastTime;\n        var dist = distance(result.position, lastPosition);\n\n        if (delta <= tapDelay && dist < tapDistanceThreshold) {\n          emitter.emit('tap', result);\n        }\n\n        lastPosition = null;\n      }\n\n      dragging = false;\n    }\n  }\n\n  function mousemove(event) {\n    var touch = getCurrentEvent(event);\n\n    if (touch) {\n      // we didn't have an identifier and now we do\n      if (filtered && event.changedTouches && touch.identifier != null) {\n        var bounds = getElementBounds(target);\n\n        if (isInsideBounds(touch, bounds)) {\n          // ensure dragging is set to true\n          dragging = true;\n        }\n      }\n\n      var result = createEvent(event, touch, target);\n\n      if (dragging || result.inside) {\n        emitter.emit('move', result);\n      }\n    }\n  }\n\n  function attach() {\n    if (attached) return;\n    attached = true;\n    target.addEventListener('touchstart', mousedown, eventOpts);\n    parent.addEventListener('touchend', mouseup, eventOpts);\n    parent.addEventListener('touchmove', mousemove, eventOpts);\n    target.addEventListener('mousedown', mousedown, eventOpts);\n    parent.addEventListener('mouseup', mouseup, eventOpts);\n    parent.addEventListener('mousemove', mousemove, eventOpts);\n\n    if (preventDefault) {\n      window.addEventListener('dragstart', preventDefaultEvent, {\n        passive: false\n      });\n      document.addEventListener('touchmove', preventDefaultEvent, {\n        passive: false\n      });\n    }\n  }\n\n  function detach() {\n    if (!attached) return;\n    attached = false;\n    target.removeEventListener('touchstart', mousedown);\n    parent.removeEventListener('touchend', mouseup);\n    parent.removeEventListener('touchmove', mousemove);\n    target.removeEventListener('mousedown', mousedown);\n    parent.removeEventListener('mouseup', mouseup);\n    parent.removeEventListener('mousemove', mousemove);\n\n    if (preventDefault) {\n      window.removeEventListener('dragstart', preventDefaultEvent);\n      document.removeEventListener('touchmove', preventDefaultEvent);\n    }\n  }\n\n  function preventDefaultEvent(ev) {\n    ev.preventDefault();\n    return false;\n  }\n\n  function getCurrentEvent(event) {\n    if (event.changedTouches) {\n      var list = event.changedTouches;\n\n      if (filtered) {\n        if (initialIdentifier == null) {\n          // first time tracking, mark identifier\n          var first = getFirstTargetTouch(list) || list[0];\n          initialIdentifier = first.identifier;\n          return first;\n        } else {\n          // identifier exists, try to get it\n          return getTouch(list, initialIdentifier);\n        }\n      } else {\n        return list[0];\n      }\n    } else {\n      return event;\n    }\n  }\n\n  function getFirstTargetTouch(touches) {\n    for (var i = 0; i < touches.length; i++) {\n      var t = touches[i];\n      if (t.target === target) return t;\n    }\n\n    return null;\n  }\n\n  function getTouch(touches, id) {\n    for (var i = 0; i < touches.length; i++) {\n      var t = touches[i];\n\n      if (t.identifier === id) {\n        return t;\n      }\n    }\n\n    return null;\n  }\n\n  function createEvent(event, touch, target) {\n    var bounds = getElementBounds(target);\n    var position = getPosition(touch, target, bounds);\n    var uv = getNormalizedPosition(position, bounds);\n    return {\n      dragging: dragging,\n      touch: touch,\n      inside: isInsideBounds(touch, bounds),\n      position: position,\n      uv: uv,\n      event: event,\n      bounds: bounds\n    };\n  }\n};\n\nfunction distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n\nfunction isInsideBounds(event, bounds) {\n  var clientX = event.clientX,\n      clientY = event.clientY;\n  return clientX >= bounds.left && clientX < bounds.right && clientY >= bounds.top && clientY < bounds.bottom;\n}\n\nfunction getNormalizedPosition(position, bounds) {\n  return [position[0] / bounds.width, position[1] / bounds.height];\n}\n\nfunction getPosition(event, target, bounds) {\n  var clientX = event.clientX,\n      clientY = event.clientY;\n  var x = clientX - bounds.left;\n  var y = clientY - bounds.top;\n  return [x, y];\n}\n\nfunction getElementBounds(element) {\n  if (element === window || element === document || element === document.body) {\n    return {\n      x: 0,\n      y: 0,\n      left: 0,\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n  } else {\n    return element.getBoundingClientRect();\n  }\n}\n\nfunction isDOMNode(obj) {\n  if (!obj || obj == null) return false;\n  var winEl = typeof window !== 'undefined' ? window : null;\n  return obj === winEl || typeof obj.nodeType === 'number' && typeof obj.nodeName === 'string';\n}","import { OrthographicCamera, PlaneBufferGeometry, Mesh } from \"../../../build/three.module.js\";\n\nfunction Pass() {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n}\n\nObject.assign(Pass.prototype, {\n  setSize: function\n    /* width, height */\n  setSize() {},\n  render: function\n    /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  render() {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function FullScreenQuad(material) {\n    this._mesh = new Mesh(geometry, material);\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function get() {\n      return this._mesh.material;\n    },\n    set: function set(value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function dispose() {\n      this._mesh.geometry.dispose();\n    },\n    render: function render(renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n\nexport { Pass };","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\nvar CopyShader = {\n  uniforms: {\n    \"tDiffuse\": {\n      value: null\n    },\n    \"opacity\": {\n      value: 1.0\n    }\n  },\n  vertexShader: [\"varying vec2 vUv;\", \"void main() {\", \"\tvUv = uv;\", \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n  fragmentShader: [\"uniform float opacity;\", \"uniform sampler2D tDiffuse;\", \"varying vec2 vUv;\", \"void main() {\", \"\tvec4 texel = texture2D( tDiffuse, vUv );\", \"\tgl_FragColor = opacity * texel;\", \"}\"].join(\"\\n\")\n};\nexport { CopyShader };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { ShaderMaterial, UniformsUtils } from \"../../../build/three.module.js\";\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar ShaderPass = function ShaderPass(shader, textureID) {\n  Pass.call(this);\n  this.textureID = textureID !== undefined ? textureID : \"tDiffuse\";\n\n  if (shader instanceof ShaderMaterial) {\n    this.uniforms = shader.uniforms;\n    this.material = shader;\n  } else if (shader) {\n    this.uniforms = UniformsUtils.clone(shader.uniforms);\n    this.material = new ShaderMaterial({\n      defines: Object.assign({}, shader.defines),\n      uniforms: this.uniforms,\n      vertexShader: shader.vertexShader,\n      fragmentShader: shader.fragmentShader\n    });\n  }\n\n  this.fsQuad = new Pass.FullScreenQuad(this.material);\n};\n\nShaderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: ShaderPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    if (this.uniforms[this.textureID]) {\n      this.uniforms[this.textureID].value = readBuffer.texture;\n    }\n\n    this.fsQuad.material = this.material;\n\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n      if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n      this.fsQuad.render(renderer);\n    }\n  }\n});\nexport { ShaderPass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar MaskPass = function MaskPass(scene, camera) {\n  Pass.call(this);\n  this.scene = scene;\n  this.camera = camera;\n  this.clear = true;\n  this.needsSwap = false;\n  this.inverse = false;\n};\n\nMaskPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: MaskPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    var context = renderer.getContext();\n    var state = renderer.state; // don't update color or depth\n\n    state.buffers.color.setMask(false);\n    state.buffers.depth.setMask(false); // lock buffers\n\n    state.buffers.color.setLocked(true);\n    state.buffers.depth.setLocked(true); // set up stencil\n\n    var writeValue, clearValue;\n\n    if (this.inverse) {\n      writeValue = 0;\n      clearValue = 1;\n    } else {\n      writeValue = 1;\n      clearValue = 0;\n    }\n\n    state.buffers.stencil.setTest(true);\n    state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n    state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\n    state.buffers.stencil.setClear(clearValue);\n    state.buffers.stencil.setLocked(true); // draw into the stencil buffer\n\n    renderer.setRenderTarget(readBuffer);\n    if (this.clear) renderer.clear();\n    renderer.render(this.scene, this.camera);\n    renderer.setRenderTarget(writeBuffer);\n    if (this.clear) renderer.clear();\n    renderer.render(this.scene, this.camera); // unlock color and depth buffer for subsequent rendering\n\n    state.buffers.color.setLocked(false);\n    state.buffers.depth.setLocked(false); // only render where stencil is set to 1\n\n    state.buffers.stencil.setLocked(false);\n    state.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff); // draw if == 1\n\n    state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n    state.buffers.stencil.setLocked(true);\n  }\n});\n\nvar ClearMaskPass = function ClearMaskPass() {\n  Pass.call(this);\n  this.needsSwap = false;\n};\n\nClearMaskPass.prototype = Object.create(Pass.prototype);\nObject.assign(ClearMaskPass.prototype, {\n  render: function render(renderer\n  /*, writeBuffer, readBuffer, deltaTime, maskActive */\n  ) {\n    renderer.state.buffers.stencil.setLocked(false);\n    renderer.state.buffers.stencil.setTest(false);\n  }\n});\nexport { MaskPass, ClearMaskPass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Clock, LinearFilter, Mesh, OrthographicCamera, PlaneBufferGeometry, RGBAFormat, Vector2, WebGLRenderTarget } from \"../../../build/three.module.js\";\nimport { CopyShader } from \"../shaders/CopyShader.js\";\nimport { ShaderPass } from \"../postprocessing/ShaderPass.js\";\nimport { MaskPass } from \"../postprocessing/MaskPass.js\";\nimport { ClearMaskPass } from \"../postprocessing/MaskPass.js\";\n\nvar EffectComposer = function EffectComposer(renderer, renderTarget) {\n  this.renderer = renderer;\n\n  if (renderTarget === undefined) {\n    var parameters = {\n      minFilter: LinearFilter,\n      magFilter: LinearFilter,\n      format: RGBAFormat,\n      stencilBuffer: false\n    };\n    var size = renderer.getSize(new Vector2());\n    this._pixelRatio = renderer.getPixelRatio();\n    this._width = size.width;\n    this._height = size.height;\n    renderTarget = new WebGLRenderTarget(this._width * this._pixelRatio, this._height * this._pixelRatio, parameters);\n    renderTarget.texture.name = 'EffectComposer.rt1';\n  } else {\n    this._pixelRatio = 1;\n    this._width = renderTarget.width;\n    this._height = renderTarget.height;\n  }\n\n  this.renderTarget1 = renderTarget;\n  this.renderTarget2 = renderTarget.clone();\n  this.renderTarget2.texture.name = 'EffectComposer.rt2';\n  this.writeBuffer = this.renderTarget1;\n  this.readBuffer = this.renderTarget2;\n  this.renderToScreen = true;\n  this.passes = []; // dependencies\n\n  if (CopyShader === undefined) {\n    console.error('THREE.EffectComposer relies on CopyShader');\n  }\n\n  if (ShaderPass === undefined) {\n    console.error('THREE.EffectComposer relies on ShaderPass');\n  }\n\n  this.copyPass = new ShaderPass(CopyShader);\n  this.clock = new Clock();\n};\n\nObject.assign(EffectComposer.prototype, {\n  swapBuffers: function swapBuffers() {\n    var tmp = this.readBuffer;\n    this.readBuffer = this.writeBuffer;\n    this.writeBuffer = tmp;\n  },\n  addPass: function addPass(pass) {\n    this.passes.push(pass);\n    pass.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n  },\n  insertPass: function insertPass(pass, index) {\n    this.passes.splice(index, 0, pass);\n    pass.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n  },\n  isLastEnabledPass: function isLastEnabledPass(passIndex) {\n    for (var i = passIndex + 1; i < this.passes.length; i++) {\n      if (this.passes[i].enabled) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  render: function render(deltaTime) {\n    // deltaTime value is in seconds\n    if (deltaTime === undefined) {\n      deltaTime = this.clock.getDelta();\n    }\n\n    var currentRenderTarget = this.renderer.getRenderTarget();\n    var maskActive = false;\n    var pass,\n        i,\n        il = this.passes.length;\n\n    for (i = 0; i < il; i++) {\n      pass = this.passes[i];\n      if (pass.enabled === false) continue;\n      pass.renderToScreen = this.renderToScreen && this.isLastEnabledPass(i);\n      pass.render(this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive);\n\n      if (pass.needsSwap) {\n        if (maskActive) {\n          var context = this.renderer.getContext();\n          var stencil = this.renderer.state.buffers.stencil; //context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n          stencil.setFunc(context.NOTEQUAL, 1, 0xffffffff);\n          this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, deltaTime); //context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n          stencil.setFunc(context.EQUAL, 1, 0xffffffff);\n        }\n\n        this.swapBuffers();\n      }\n\n      if (MaskPass !== undefined) {\n        if (pass instanceof MaskPass) {\n          maskActive = true;\n        } else if (pass instanceof ClearMaskPass) {\n          maskActive = false;\n        }\n      }\n    }\n\n    this.renderer.setRenderTarget(currentRenderTarget);\n  },\n  reset: function reset(renderTarget) {\n    if (renderTarget === undefined) {\n      var size = this.renderer.getSize(new Vector2());\n      this._pixelRatio = this.renderer.getPixelRatio();\n      this._width = size.width;\n      this._height = size.height;\n      renderTarget = this.renderTarget1.clone();\n      renderTarget.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);\n    }\n\n    this.renderTarget1.dispose();\n    this.renderTarget2.dispose();\n    this.renderTarget1 = renderTarget;\n    this.renderTarget2 = renderTarget.clone();\n    this.writeBuffer = this.renderTarget1;\n    this.readBuffer = this.renderTarget2;\n  },\n  setSize: function setSize(width, height) {\n    this._width = width;\n    this._height = height;\n    var effectiveWidth = this._width * this._pixelRatio;\n    var effectiveHeight = this._height * this._pixelRatio;\n    this.renderTarget1.setSize(effectiveWidth, effectiveHeight);\n    this.renderTarget2.setSize(effectiveWidth, effectiveHeight);\n\n    for (var i = 0; i < this.passes.length; i++) {\n      this.passes[i].setSize(effectiveWidth, effectiveHeight);\n    }\n  },\n  setPixelRatio: function setPixelRatio(pixelRatio) {\n    this._pixelRatio = pixelRatio;\n    this.setSize(this._width, this._height);\n  }\n});\n\nvar Pass = function Pass() {\n  // if set to true, the pass is processed by the composer\n  this.enabled = true; // if set to true, the pass indicates to swap read and write buffer after rendering\n\n  this.needsSwap = true; // if set to true, the pass clears its buffer before rendering\n\n  this.clear = false; // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\n  this.renderToScreen = false;\n};\n\nObject.assign(Pass.prototype, {\n  setSize: function\n    /* width, height */\n  setSize() {},\n  render: function\n    /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */\n  render() {\n    console.error('THREE.Pass: .render() must be implemented in derived pass.');\n  }\n}); // Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = function () {\n  var camera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  var geometry = new PlaneBufferGeometry(2, 2);\n\n  var FullScreenQuad = function FullScreenQuad(material) {\n    this._mesh = new Mesh(geometry, material);\n  };\n\n  Object.defineProperty(FullScreenQuad.prototype, 'material', {\n    get: function get() {\n      return this._mesh.material;\n    },\n    set: function set(value) {\n      this._mesh.material = value;\n    }\n  });\n  Object.assign(FullScreenQuad.prototype, {\n    dispose: function dispose() {\n      this._mesh.geometry.dispose();\n    },\n    render: function render(renderer) {\n      renderer.render(this._mesh, camera);\n    }\n  });\n  return FullScreenQuad;\n}();\n\nexport { EffectComposer, Pass };","/**\n * @author alteredq / http://alteredqualia.com/\n */\nimport { Pass } from \"../postprocessing/Pass.js\";\n\nvar RenderPass = function RenderPass(scene, camera, overrideMaterial, clearColor, clearAlpha) {\n  Pass.call(this);\n  this.scene = scene;\n  this.camera = camera;\n  this.overrideMaterial = overrideMaterial;\n  this.clearColor = clearColor;\n  this.clearAlpha = clearAlpha !== undefined ? clearAlpha : 0;\n  this.clear = true;\n  this.clearDepth = false;\n  this.needsSwap = false;\n};\n\nRenderPass.prototype = Object.assign(Object.create(Pass.prototype), {\n  constructor: RenderPass,\n  render: function render(renderer, writeBuffer, readBuffer\n  /*, deltaTime, maskActive */\n  ) {\n    var oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    var oldClearColor, oldClearAlpha, oldOverrideMaterial;\n\n    if (this.overrideMaterial !== undefined) {\n      oldOverrideMaterial = this.scene.overrideMaterial;\n      this.scene.overrideMaterial = this.overrideMaterial;\n    }\n\n    if (this.clearColor) {\n      oldClearColor = renderer.getClearColor().getHex();\n      oldClearAlpha = renderer.getClearAlpha();\n      renderer.setClearColor(this.clearColor, this.clearAlpha);\n    }\n\n    if (this.clearDepth) {\n      renderer.clearDepth();\n    }\n\n    renderer.setRenderTarget(this.renderToScreen ? null : readBuffer); // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\n    if (this.clear) renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\n    renderer.render(this.scene, this.camera);\n\n    if (this.clearColor) {\n      renderer.setClearColor(oldClearColor, oldClearAlpha);\n    }\n\n    if (this.overrideMaterial !== undefined) {\n      this.scene.overrideMaterial = oldOverrideMaterial;\n    }\n\n    renderer.autoClear = oldAutoClear;\n  }\n});\nexport { RenderPass };","import imagesLoaded from 'imagesloaded'\nimport * as THREE from 'three'\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\nimport createInputEvents from 'simple-input-events'\nimport { lerp } from './assists/utils'\n\nconst event = createInputEvents(window)\n\nlet docScroll\nconst getPageYScroll = () => (docScroll = window.pageYOffset || document.documentElement.scrollTop)\nwindow.addEventListener('scroll', getPageYScroll)\n\n// calculate the viewport size\nlet winsize\nconst calcWinsize = () => (winsize = { width: window.innerWidth, height: window.innerHeight })\ncalcWinsize()\n// and recalculate on resize\nwindow.addEventListener('resize', calcWinsize)\n\nwindow.onbeforeunload = function () {\n  window.scrollTo(0, 0)\n}\n\n//.............|   SCENE   |................\nlet scene = new THREE.Scene()\nlet renderer = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true\n})\nrenderer.setPixelRatio(1)\nrenderer.setSize(window.innerWidth, window.innerHeight)\nrenderer.sortObjects = false\nrenderer.outputEncoding = THREE.sRGBEncoding\n\nlet camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 100, 1000)\n\nlet cameraDistance = 400\ncamera.position.set(0, 0, cameraDistance)\ncamera.lookAt(0, 0, 0)\nlet time = 0\nlet speed = 0\nlet targetSpeed = 0\nlet mouse = new THREE.Vector2()\nlet followMouse = new THREE.Vector2()\nlet prevMouse = new THREE.Vector2()\n\nwindow.addEventListener('resize', _resize.bind(this))\n\nlet composer = new EffectComposer(renderer)\nlet renderPass = new RenderPass(scene, camera)\ncomposer.addPass(renderPass)\n\n//custom shader pass\nlet myEffect = {\n  uniforms: {\n    tDiffuse: { value: null },\n    distort: { value: 0 },\n    resolution: {\n      value: new THREE.Vector2(1, window.innerHeight / window.innerWidth)\n    },\n    uMouse: { value: new THREE.Vector2(-10, -10) },\n    uVelo: { value: 0 },\n    uScale: { value: 0 },\n    uType: { value: 0 },\n    time: { value: 0 }\n  },\n  vertexShader: `\n            uniform float time;\n            uniform float progress;\n            uniform vec2 resolution;\n            varying vec2 vUv;\n            uniform sampler2D texture1;\n            \n            const float pi = 3.1415925;\n            \n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n            }\n        `,\n  fragmentShader: `\n            uniform float time;\n            uniform float progress;\n            uniform sampler2D tDiffuse;\n            uniform vec2 resolution;\n            varying vec2 vUv;\n            uniform vec2 uMouse;\n            uniform float uVelo;\n            uniform int uType;\n            \n            \n            float circle(vec2 uv, vec2 disc_center, float disc_radius, float border_size) {\n            uv -= disc_center;\n            uv*=resolution;\n            float dist = sqrt(dot(uv, uv));\n                return smoothstep(disc_radius+border_size, disc_radius-border_size, dist);\n            }\n            \n            float map(float value, float min1, float max1, float min2, float max2) {\n                return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n            }\n            \n            float remap(float value, float inMin, float inMax, float outMin, float outMax) {\n                return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n            }\n            \n            float hash12(vec2 p) {\n                float h = dot(p,vec2(127.1,311.7));\n                return fract(sin(h)*43758.5453123);\n            }\n            \n            // #define HASHSCALE3 vec3(.1031, .1030, .0973)\n            vec2 hash2d(vec2 p)\n            {\n            vec3 p3 = fract(vec3(p.xyx) * vec3(.1031, .1030, .0973));\n                p3 += dot(p3, p3.yzx+19.19);\n                return fract((p3.xx+p3.yz)*p3.zy);\n            }\n            \n            \n            \n            \n            void main(){\n                vec2 newUV = vUv;\n                vec4 color = vec4(1.,0.,0.,1.);\n                \n                // colorful\n                if(uType==0){\n                    float c = circle(newUV, uMouse, 0.0, 0.2);\n                    float r = texture2D(tDiffuse, newUV.xy += c * (uVelo * .5)).x;\n                    float g = texture2D(tDiffuse, newUV.xy += c * (uVelo * .525)).y;\n                    float b = texture2D(tDiffuse, newUV.xy += c * (uVelo * .55)).z;\n                    color = vec4(r, g, b, 1.);\n                }\n            \n                gl_FragColor = color;\n            }\n        `\n}\n\nlet customPass = new ShaderPass(myEffect)\ncustomPass.renderToScreen = true\ncomposer.addPass(customPass)\n\nevent.on('move', ({ position, event, inside, dragging }) => {\n  // mousemove / touchmove\n  mouse.x = position[0] / window.innerWidth\n  mouse.y = 1 - position[1] / window.innerHeight\n})\n\nlet geometry = new THREE.PlaneBufferGeometry(1, 1, 80, 80)\nlet material = new THREE.ShaderMaterial({\n  extensions: {\n    derivatives: '#extension GL_OES_standard_derivatives : enable'\n  },\n  side: THREE.DoubleSide,\n  uniforms: {\n    time: { type: 'f', value: 0 },\n    progress: { type: 'f', value: 0 },\n    angle: { type: 'f', value: 0 },\n    texture1: { type: 't', value: null },\n    texture2: { type: 't', value: null },\n    resolution: { type: 'v4', value: new THREE.Vector4() },\n    uvRate1: {\n      value: new THREE.Vector2(1, 1)\n    }\n  },\n  transparent: true,\n  vertexShader: `\n            uniform float time;\n            uniform float progress;\n            uniform vec4 resolution;\n            varying vec2 vUv;\n            uniform sampler2D texture1;\n            \n            const float pi = 3.1415925;\n            \n            void main() {\n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n            }\n        `,\n  fragmentShader: `\n            uniform float time;\n            uniform float progress;\n            uniform sampler2D texture1;\n            uniform vec4 resolution;\n            varying vec2 vUv;\n            \n            \n            void main(){\n                vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);\n                // newUV.x += 0.02*sin(newUV.y*20. + time);\n                gl_FragColor = texture2D(texture1,newUV);\n            }\n        `\n})\n\nfunction _resize() {\n  let width = window.innerWidth\n  let height = window.innerHeight\n  renderer.setSize(width, height)\n  camera.aspect = width / height\n  camera.fov = 2 * Math.atan(width / camera.aspect / (2 * cameraDistance)) * (180 / Math.PI) // in degrees\n  customPass.uniforms.resolution.value.y = height / width\n  camera.updateProjectionMatrix()\n}\n\nfunction getSpeed() {\n  speed = Math.sqrt((prevMouse.x - mouse.x) ** 2 + (prevMouse.y - mouse.y) ** 2)\n\n  targetSpeed -= 0.1 * (targetSpeed - speed)\n  followMouse.x -= 0.1 * (followMouse.x - mouse.x)\n  followMouse.y -= 0.1 * (followMouse.y - mouse.y)\n\n  prevMouse.x = mouse.x\n  prevMouse.y = mouse.y\n}\n\nfunction render() {\n  time += 0.05\n  getSpeed()\n  scene.children.forEach((m) => {\n    if (m.material.uniforms) {\n      m.material.uniforms.time.value = time\n    }\n  })\n  customPass.uniforms.time.value = time\n  customPass.uniforms.uMouse.value = followMouse\n  customPass.uniforms.uVelo.value = Math.min(targetSpeed, 0.05)\n  targetSpeed *= 0.999\n  // let renderer.render(let scene, let camera);\n  if (composer) composer.render()\n}\nrender()\n\nfunction createMesh(o) {\n  material = material.clone()\n  let texture = new THREE.Texture(o.image)\n  texture.needsUpdate = true\n  // image cover\n  let imageAspect = o.iHeight / o.iWidth\n  let a1\n  let a2\n  if (o.height / o.width > imageAspect) {\n    a1 = (o.width / o.height) * imageAspect\n    a2 = 1\n  } else {\n    a1 = 1\n    a2 = o.height / o.width / imageAspect\n  }\n  texture.minFilter = THREE.LinearFilter\n  material.uniforms.resolution.value.x = o.width\n  material.uniforms.resolution.value.y = o.height\n  material.uniforms.resolution.value.z = a1\n  material.uniforms.resolution.value.w = a2\n  material.uniforms.progress.value = 0\n  material.uniforms.angle.value = 0.3\n\n  material.uniforms.texture1.value = texture\n  material.uniforms.texture1.value.needsUpdate = true\n\n  let mesh = new THREE.Mesh(geometry, material)\n\n  mesh.scale.set(o.width, o.height, o.width / 2)\n\n  return mesh\n}\n\nfunction Item(image, scroll) {\n  let currentScroll = docScroll\n  let shouldRollBack = false\n  let shouldUnRoll = false\n  let positions = []\n\n  let container = document.getElementById('pic-container')\n  container.appendChild(renderer.domElement)\n\n  //..........................................\n  //..........................................\n  // set the initial values\n  let bounds\n  let fromTop\n  let windowHeight\n  let withoutHeight\n  let withHeight\n  let insideTop\n  let insideRealTop\n  let insideBottom\n  let width\n  let height\n  let left\n  function getSize() {\n    bounds = image.getBoundingClientRect()\n    fromTop = bounds.top\n    windowHeight = window.innerHeight\n    withoutHeight = fromTop - windowHeight\n    withHeight = fromTop + bounds.height\n    insideTop = withoutHeight - docScroll\n    insideRealTop = fromTop + docScroll\n    insideBottom = withHeight - docScroll + 50\n    width = bounds.width\n    height = bounds.height\n    left = bounds.left\n  }\n  getSize()\n\n  let mesh = createMesh({\n    width: width,\n    height: height,\n    image: image,\n    iWidth: image.width,\n    iHeight: image.height\n  })\n  scene.add(mesh)\n  // use the IntersectionObserver API to check when the element is inside the viewport\n  // only then the element translation will be updated\n  let options = {\n    root: null,\n    rootMargin: '0px',\n    threshold: [0, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]\n  }\n  let observer = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      positions.push(entry.boundingClientRect.y)\n      let compareArray = positions.slice(positions.length - 2, positions.length)\n      let down = compareArray[0] > compareArray[1]\n\n      let isVisible = entry.intersectionRatio > 0.0\n\n      shouldRollBack = false\n      shouldUnRoll = false\n      if (entry.intersectionRatio < 0.5 && entry.boundingClientRect.y > 0 && isVisible && !down) {\n        shouldRollBack = true\n      }\n\n      if (entry.intersectionRatio > 0.5 && entry.boundingClientRect.y > 0 && isVisible) {\n        shouldUnRoll = true\n      }\n      console.log(isVisible, 'vis')\n      mesh.visible = isVisible\n    })\n  }, options)\n  observer.observe(image)\n  // init/bind events\n  function resize() {\n    getSize()\n    mesh.scale.set(width, height, 200)\n    // onSetPosition(scroll.renderedStyles.translationY.current)\n    scroll.shouldRender = true\n  }\n  window.addEventListener('resize', () => resize())\n\n  function onSetPosition(currentScroll) {\n    mesh.position.y = currentScroll + winsize.height / 2 - insideRealTop - height / 2\n    mesh.position.x = 0 - winsize.width / 2 + left + width / 2\n  }\n  onSetPosition(0)\n}\n\nfunction SmoothScroll(image) {\n  let shouldRender = false\n  // the <main> element\n  // const DOM = { main: document.getElementById(\"___gatsby\") }\n  // the scrollable element\n  // we translate this element when scrolling (y-axis)\n  // DOM.scrollable = DOM.main.querySelector(\"main\")\n  let picItem = new Item(image, this)\n\n  document.addEventListener('mousemove', () => {\n    shouldRender = true\n  })\n\n  // here we define which property will change as we scroll the page\n  // in this case we will be translating on the y-axis\n  // we interpolate between the previous and current value to achieve the smooth scrolling effect\n  let renderedStyles = {\n    translationY: {\n      // interpolated value\n      previous: 0,\n      // current value\n      current: 0,\n      // amount to interpolate\n      ease: 0.1,\n      // current value setter\n      // in this case the value of the translation will be the same like the document scroll\n      setValue: () => docScroll\n    }\n  }\n  // set the body's height\n  // function setSize() {\n  // document.body.style.height = `${DOM.scrollable.scrollHeight}px`;\n  // }\n  // setSize()\n  // set the initial values\n  // for (const key in renderedStyles) {\n  //   renderedStyles[key].current = renderedStyles[key].previous = renderedStyles[key].setValue()\n  // }\n  // translate the scrollable element\n  function setPosition() {\n    // translates the scrollable element\n    if (\n      Math.round(renderedStyles.translationY.previous) !==\n        Math.round(renderedStyles.translationY.current) ||\n      renderedStyles.translationY.previous < 10\n    ) {\n      shouldRender = true\n      // DOM.scrollable.style.transform = `translate3d(0,${-1 *\n      //   renderedStyles.translationY.previous}px,0)`;\n      if (picItem.isVisible || picItem.isBeingAnimatedNow) {\n        picItem.render(renderedStyles.translationY.previous)\n      }\n    }\n    if (targetSpeed > 0.01) shouldRender = true\n\n    if (shouldRender) {\n      shouldRender = false\n      render()\n    }\n  }\n  setPosition()\n  shouldRender = true\n\n  // the <main> element's style needs to be modified\n  // DOM.main.style.position = \"fixed\";\n  // DOM.main.style.width = DOM.main.style.height = \"100%\";\n  // DOM.main.style.top = DOM.main.style.left = 0;\n  // DOM.main.style.overflow = \"hidden\";\n  // init/bind events\n  // window.addEventListener(\"resize\", () => setSize());\n  // start the render loop\n  requestAnimationFrame(() => onRenderStyles())\n\n  function onRenderStyles() {\n    // update the current and interpolated values\n    for (const key in renderedStyles) {\n      renderedStyles[key].current = renderedStyles[key].setValue()\n      renderedStyles[key].previous = lerp(\n        renderedStyles[key].previous,\n        renderedStyles[key].current,\n        renderedStyles[key].ease\n      )\n    }\n    setPosition()\n    requestAnimationFrame(() => onRenderStyles())\n  }\n}\n\nexport function PictureAnimation() {\n  const image = imagesLoaded(document.getElementById('my-picture'), {\n    background: true\n  }).images[0].img\n  const wrapper = document.querySelector('.pic-wrapper')\n  wrapper.classList.remove('loading')\n  wrapper.classList.add('loaded')\n\n  // Get the scroll position\n  getPageYScroll()\n  // Initialize the Smooth Scrolling\n  new SmoothScroll(image)\n}\n","// Map number x from range [a, b] to [c, d]\nconst map = (x, a, b, c, d) => ((x - a) * (d - c)) / (b - a) + c\n\n// Linear interpolation\nconst lerp = (a, b, n) => (1 - n) * a + n * b\n\nconst clamp = (num, min, max) => (num <= min ? min : num >= max ? max : num)\n\n// Gets the mouse position\nconst getMousePos = (e) => {\n  let posx = 0\n  let posy = 0\n  if (!e) e = window.event\n  if (e.pageX || e.pageY) {\n    posx = e.pageX\n    posy = e.pageY\n  } else if (e.clientX || e.clientY) {\n    posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft\n    posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop\n  }\n\n  return { x: posx, y: posy }\n}\n\n// Generate a random float.\nconst getRandomFloat = (min, max) => (Math.random() * (max - min) + min).toFixed(2)\n\nexport { map, lerp, clamp, getMousePos, getRandomFloat }\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n(function (window, factory) {\n  'use strict'; // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define(['ev-emitter/ev-emitter'], function (EvEmitter) {\n      return factory(window, EvEmitter);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('ev-emitter'));\n  } else {\n    // browser global\n    window.imagesLoaded = factory(window, window.EvEmitter);\n  }\n})(typeof window !== 'undefined' ? window : this, // --------------------------  factory -------------------------- //\nfunction factory(window, EvEmitter) {\n  'use strict';\n\n  var $ = window.jQuery;\n  var console = window.console; // -------------------------- helpers -------------------------- //\n  // extend objects\n\n  function extend(a, b) {\n    for (var prop in b) {\n      a[prop] = b[prop];\n    }\n\n    return a;\n  }\n\n  var arraySlice = Array.prototype.slice; // turn element or nodeList into an array\n\n  function makeArray(obj) {\n    if (Array.isArray(obj)) {\n      // use object if already an array\n      return obj;\n    }\n\n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n\n    if (isArrayLike) {\n      // convert nodeList to array\n      return arraySlice.call(obj);\n    } // array of single index\n\n\n    return [obj];\n  } // -------------------------- imagesLoaded -------------------------- //\n\n  /**\n   * @param {Array, Element, NodeList, String} elem\n   * @param {Object or Function} options - if function, use as callback\n   * @param {Function} onAlways - callback function\n   */\n\n\n  function ImagesLoaded(elem, options, onAlways) {\n    // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n    if (!(this instanceof ImagesLoaded)) {\n      return new ImagesLoaded(elem, options, onAlways);\n    } // use elem as selector string\n\n\n    var queryElem = elem;\n\n    if (typeof elem == 'string') {\n      queryElem = document.querySelectorAll(elem);\n    } // bail if bad element\n\n\n    if (!queryElem) {\n      console.error('Bad element for imagesLoaded ' + (queryElem || elem));\n      return;\n    }\n\n    this.elements = makeArray(queryElem);\n    this.options = extend({}, this.options); // shift arguments if no options set\n\n    if (typeof options == 'function') {\n      onAlways = options;\n    } else {\n      extend(this.options, options);\n    }\n\n    if (onAlways) {\n      this.on('always', onAlways);\n    }\n\n    this.getImages();\n\n    if ($) {\n      // add jQuery Deferred object\n      this.jqDeferred = new $.Deferred();\n    } // HACK check async to allow time to bind listeners\n\n\n    setTimeout(this.check.bind(this));\n  }\n\n  ImagesLoaded.prototype = Object.create(EvEmitter.prototype);\n  ImagesLoaded.prototype.options = {};\n\n  ImagesLoaded.prototype.getImages = function () {\n    this.images = []; // filter & find items if we have an item selector\n\n    this.elements.forEach(this.addElementImages, this);\n  };\n  /**\n   * @param {Node} element\n   */\n\n\n  ImagesLoaded.prototype.addElementImages = function (elem) {\n    // filter siblings\n    if (elem.nodeName == 'IMG') {\n      this.addImage(elem);\n    } // get background image on element\n\n\n    if (this.options.background === true) {\n      this.addElementBackgroundImages(elem);\n    } // find children\n    // no non-element nodes, #143\n\n\n    var nodeType = elem.nodeType;\n\n    if (!nodeType || !elementNodeTypes[nodeType]) {\n      return;\n    }\n\n    var childImgs = elem.querySelectorAll('img'); // concat childElems to filterFound array\n\n    for (var i = 0; i < childImgs.length; i++) {\n      var img = childImgs[i];\n      this.addImage(img);\n    } // get child background images\n\n\n    if (typeof this.options.background == 'string') {\n      var children = elem.querySelectorAll(this.options.background);\n\n      for (i = 0; i < children.length; i++) {\n        var child = children[i];\n        this.addElementBackgroundImages(child);\n      }\n    }\n  };\n\n  var elementNodeTypes = {\n    1: true,\n    9: true,\n    11: true\n  };\n\n  ImagesLoaded.prototype.addElementBackgroundImages = function (elem) {\n    var style = getComputedStyle(elem);\n\n    if (!style) {\n      // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n      return;\n    } // get url inside url(\"...\")\n\n\n    var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n    var matches = reURL.exec(style.backgroundImage);\n\n    while (matches !== null) {\n      var url = matches && matches[2];\n\n      if (url) {\n        this.addBackground(url, elem);\n      }\n\n      matches = reURL.exec(style.backgroundImage);\n    }\n  };\n  /**\n   * @param {Image} img\n   */\n\n\n  ImagesLoaded.prototype.addImage = function (img) {\n    var loadingImage = new LoadingImage(img);\n    this.images.push(loadingImage);\n  };\n\n  ImagesLoaded.prototype.addBackground = function (url, elem) {\n    var background = new Background(url, elem);\n    this.images.push(background);\n  };\n\n  ImagesLoaded.prototype.check = function () {\n    var _this = this;\n\n    this.progressedCount = 0;\n    this.hasAnyBroken = false; // complete if no images\n\n    if (!this.images.length) {\n      this.complete();\n      return;\n    }\n\n    function onProgress(image, elem, message) {\n      // HACK - Chrome triggers event before object properties have changed. #83\n      setTimeout(function () {\n        _this.progress(image, elem, message);\n      });\n    }\n\n    this.images.forEach(function (loadingImage) {\n      loadingImage.once('progress', onProgress);\n      loadingImage.check();\n    });\n  };\n\n  ImagesLoaded.prototype.progress = function (image, elem, message) {\n    this.progressedCount++;\n    this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded; // progress event\n\n    this.emitEvent('progress', [this, image, elem]);\n\n    if (this.jqDeferred && this.jqDeferred.notify) {\n      this.jqDeferred.notify(this, image);\n    } // check if completed\n\n\n    if (this.progressedCount == this.images.length) {\n      this.complete();\n    }\n\n    if (this.options.debug && console) {\n      console.log('progress: ' + message, image, elem);\n    }\n  };\n\n  ImagesLoaded.prototype.complete = function () {\n    var eventName = this.hasAnyBroken ? 'fail' : 'done';\n    this.isComplete = true;\n    this.emitEvent(eventName, [this]);\n    this.emitEvent('always', [this]);\n\n    if (this.jqDeferred) {\n      var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n      this.jqDeferred[jqMethod](this);\n    }\n  }; // --------------------------  -------------------------- //\n\n\n  function LoadingImage(img) {\n    this.img = img;\n  }\n\n  LoadingImage.prototype = Object.create(EvEmitter.prototype);\n\n  LoadingImage.prototype.check = function () {\n    // If complete is true and browser supports natural sizes,\n    // try to check for image status manually.\n    var isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      // report based on naturalWidth\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      return;\n    } // If none of the checks above matched, simulate loading on detached element.\n\n\n    this.proxyImage = new Image();\n    this.proxyImage.addEventListener('load', this);\n    this.proxyImage.addEventListener('error', this); // bind to image as well for Firefox. #191\n\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.proxyImage.src = this.img.src;\n  };\n\n  LoadingImage.prototype.getIsImageComplete = function () {\n    // check for non-zero, non-undefined naturalWidth\n    // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n    return this.img.complete && this.img.naturalWidth;\n  };\n\n  LoadingImage.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    this.emitEvent('progress', [this, this.img, message]);\n  }; // ----- events ----- //\n  // trigger specified handler for event type\n\n\n  LoadingImage.prototype.handleEvent = function (event) {\n    var method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  LoadingImage.prototype.onload = function () {\n    this.confirm(true, 'onload');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.onerror = function () {\n    this.confirm(false, 'onerror');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.unbindEvents = function () {\n    this.proxyImage.removeEventListener('load', this);\n    this.proxyImage.removeEventListener('error', this);\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  }; // -------------------------- Background -------------------------- //\n\n\n  function Background(url, element) {\n    this.url = url;\n    this.element = element;\n    this.img = new Image();\n  } // inherit LoadingImage prototype\n\n\n  Background.prototype = Object.create(LoadingImage.prototype);\n\n  Background.prototype.check = function () {\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.img.src = this.url; // check if image is already complete\n\n    var isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      this.unbindEvents();\n    }\n  };\n\n  Background.prototype.unbindEvents = function () {\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  };\n\n  Background.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    this.emitEvent('progress', [this, this.element, message]);\n  }; // -------------------------- jQuery -------------------------- //\n\n\n  ImagesLoaded.makeJQueryPlugin = function (jQuery) {\n    jQuery = jQuery || window.jQuery;\n\n    if (!jQuery) {\n      return;\n    } // set local variable\n\n\n    $ = jQuery; // $().imagesLoaded()\n\n    $.fn.imagesLoaded = function (options, callback) {\n      var instance = new ImagesLoaded(this, options, callback);\n      return instance.jqDeferred.promise($(this));\n    };\n  }; // try making plugin\n\n\n  ImagesLoaded.makeJQueryPlugin(); // --------------------------  -------------------------- //\n\n  return ImagesLoaded;\n});","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}"],"sourceRoot":""}