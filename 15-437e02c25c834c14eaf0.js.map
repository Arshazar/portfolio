{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./src/animations/projectsAnimations.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_inherits","subClass","superClass","prototype","create","constructor","value","writable","configurable","_getPrototypeOf","getPrototypeOf","_typeof","obj","Symbol","iterator","_possibleConstructorReturn","call","assertThisInitialized","projectsAnimations","clock","itemsWrapper","document","querySelector","isLoaded","container","getElementById","wrapper","viewport","width","clientWidth","height","clientHeight","aspectRatio","Number","map","in_min","in_max","out_min","out_max","this","window","addEventListener","camera","aspect","updateProjectionMatrix","renderer","setSize","bind","THREE","antialias","alpha","setPixelRatio","devicePixelRatio","appendChild","domElement","scene","position","set","mouse","setAnimationLoop","getDelta","render","isMouseOver","currentItem","items","querySelectorAll","item","index","element","img","options","distance","z","vFov","fov","Math","PI","viewSize","tan","_onMouseOver","event","e","TweenLite","to","uniforms","uAlpha","ease","Power4","easeOut","onMouseEnter","texture","imageRatio","naturalWidth","naturalHeight","scale","uTexture","plane","copy","onTargetChange","onMouseOver","onPositionUpdate","uOffset","clone","sub","multiplyScalar","strength","forEach","x","clientX","y","clientY","onUpdate","onMouseMove","promises","THREEtextureLoader","geometry","uTime","material","vertexShader","fragmentShader","transparent","add","push","loader","url","Promise","resolve","reject","load","undefined","error","console","loadTexture","src","all","then","promise","log","_defineProperty","key","defineProperty","enumerable"],"mappings":"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","file":"15-437e02c25c834c14eaf0.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import * as THREE from \"three\"\nimport { TweenLite, Power4 } from \"gsap\"\n\nexport function projectsAnimations() {\n  //VARIABLES\n  let itemsWrapper = document.querySelector(\".projects\")\n  let isLoaded = false\n  let timeSpeed\n  let time\n  let clock\n  let container = document.getElementById(\"p-container\")\n  let wrapper = document.querySelector(\".projects-wrapper\")\n\n  const viewport = {\n    width: wrapper.clientWidth,\n    height: wrapper.clientHeight,\n    aspectRatio: wrapper.clientWidth / wrapper.clientHeight,\n  }\n  //MATH\n  Number.prototype.map = function (in_min, in_max, out_min, out_max) {\n    return ((this - in_min) * (out_max - out_min)) / (in_max - in_min) + out_min\n  }\n\n  window.addEventListener(\"resize\", onWindowResize.bind(this), false)\n  let renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true })\n  renderer.setSize(viewport.width, viewport.height)\n  renderer.setPixelRatio(window.devicePixelRatio)\n  container.appendChild(renderer.domElement)\n  let scene = new THREE.Scene()\n  let camera = new THREE.PerspectiveCamera(40, viewport.aspectRatio, 0.1, 100)\n  camera.position.set(0, 0, 3)\n\n  let mouse = new THREE.Vector2()\n\n  //TIME\n  timeSpeed = 2\n  time = 0\n  clock = new THREE.Clock()\n  //...............render.............\n  function render() {\n    // called every frame\n    time += clock.getDelta() * timeSpeed\n    renderer.render(scene, camera)\n  }\n  renderer.setAnimationLoop(render.bind(this))\n\n  //...........ITEMS..............\n  let items = [...itemsWrapper.querySelectorAll(\".project\")]\n  items = items.map((item, index) => ({\n    element: item,\n    img: item.querySelector(\"img\") || null,\n    index: index,\n  }))\n\n  //..........EVENT LISTENERS..............\n  let tempItemIndex\n  let isMouseOver\n  let currentItem\n  let options = {}\n\n  //VIEW SIZE\n  let distance = camera.position.z\n  let vFov = (camera.fov * Math.PI) / 180\n  const viewSize = {\n    width: 2 * Math.tan(vFov / 2) * distance * viewport.aspectRatio,\n    height: 2 * Math.tan(vFov / 2) * distance,\n    vFov,\n  }\n\n  items.forEach((item, index) => {\n    item.element.addEventListener(\n      \"mouseover\",\n      _onMouseOver.bind(this, index),\n      false\n    )\n  })\n\n  container.addEventListener(\"mousemove\", _onMouseMove.bind(this), false)\n  itemsWrapper.addEventListener(\"mouseleave\", _onMouseLeave.bind(this), false)\n\n  function _onMouseLeave(event) {\n    isMouseOver = false\n    onMouseLeave(event)\n  }\n\n  function _onMouseMove(event) {\n    // get normalized mouse position on viewport\n    mouse.x = (event.clientX / viewport.width) * 2 - 1\n    mouse.y = -(event.clientY / viewport.height) * 2 + 1\n\n    onMouseMove(event)\n  }\n\n  function _onMouseOver(index, event) {\n    tempItemIndex = index\n\n    onMouseOver(index, event)\n  }\n\n  //.............resize............\n  function onWindowResize() {\n    camera.aspect = viewport.aspectRatio\n    camera.updateProjectionMatrix()\n    renderer.setSize(viewport.width, viewport.height)\n  }\n\n  //......UPDATE TEXTURE..........\n  function onMouseEnter() {\n    if (!currentItem || !isMouseOver) {\n      isMouseOver = true\n      // show plane\n      TweenLite.to(uniforms.uAlpha, 0.5, {\n        value: 1,\n        ease: Power4.easeOut,\n      })\n    }\n  }\n\n  function onMouseLeave(event) {\n    TweenLite.to(uniforms.uAlpha, 0.5, {\n      value: 0,\n      ease: Power4.easeOut,\n    })\n  }\n\n  function onMouseMove(event) {\n    // project mouse position to world coodinates\n    let x = mouse.x.map(-1, 1, -viewSize.width / 2, viewSize.width / 2)\n    let y = mouse.y.map(-1, 1, -viewSize.height / 2, viewSize.height / 2)\n\n    position = new THREE.Vector3(x, y, 0)\n    TweenLite.to(plane.position, 1, {\n      x: x,\n      y: y,\n      ease: Power4.easeOut,\n      onUpdate: onPositionUpdate.bind(this),\n    })\n  }\n\n  function onTargetChange(index) {\n    // item target changed\n    currentItem = items[index]\n    if (!currentItem.texture) return\n\n    // compute image ratio\n    let imageRatio =\n      currentItem.img.naturalWidth / currentItem.img.naturalHeight\n    scale = new THREE.Vector3(imageRatio, 1, 1)\n    uniforms.uTexture.value = currentItem.texture\n    plane.scale.copy(scale)\n  }\n\n  function onMouseOver(index, e) {\n    if (!isLoaded) return\n    onMouseEnter()\n    if (currentItem && currentItem.index === index) return\n    onTargetChange(index)\n  }\n\n  function onPositionUpdate() {\n    // compute offset\n    uniforms.uOffset.value = plane.position\n      .clone()\n      .sub(position)\n      .multiplyScalar(-options.strength)\n  }\n\n  //..........LOAD TEXTURE.......\n  function loadTexture(loader, url, index) {\n    // https://threejs.org/docs/#api/en/loaders/TextureLoader\n    return new Promise((resolve, reject) => {\n      if (!url) {\n        resolve({ texture: null, index })\n        return\n      }\n      // load a resource\n      loader.load(\n        // resource URL\n        url,\n\n        // onLoad callback\n        texture => {\n          resolve({ texture, index })\n        },\n\n        // onProgress callback currently not supported\n        undefined,\n\n        // onError callback\n        error => {\n          console.error(\"An error happened.\", error)\n          reject(error)\n        }\n      )\n    })\n  }\n\n  //..........INIT..............\n  options.strength = options.strength || 0.25\n\n  let position = new THREE.Vector3(0, 0, 0)\n  let scale = new THREE.Vector3(1, 1, 1)\n  let geometry = new THREE.PlaneBufferGeometry(1, 1, 32, 32)\n  let uniforms = {\n    uTime: {\n      value: 0,\n    },\n    uTexture: {\n      value: null,\n    },\n    uOffset: {\n      value: new THREE.Vector2(0.0, 0.0),\n    },\n    uAlpha: {\n      value: 0,\n    },\n  }\n  let material = new THREE.ShaderMaterial({\n    uniforms: uniforms,\n    vertexShader: `\n                uniform vec2 uOffset;\n                varying vec2 vUv;\n                vec3 deformationCurve(vec3 position, vec2 uv, vec2 offset) {\n                  float M_PI = 3.1415926535897932384626433832795;\n                  position.x = position.x + (sin(uv.y * M_PI) * offset.x);\n                  position.y = position.y + (sin(uv.x * M_PI) * offset.y);\n                  return position;\n                }\n                \n                void main() {\n                  vUv = uv;\n                  vec3 newPosition = position;\n                  newPosition = deformationCurve(position,uv,uOffset);\n                  gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n                }\n              `,\n    fragmentShader: `\n                uniform sampler2D uTexture;\n                uniform float uAlpha;\n                uniform vec2 uOffset;\n                varying vec2 vUv;\n                vec3 rgbShift(sampler2D texture, vec2 uv, vec2 offset) {\n                  float r = texture2D(uTexture,vUv + uOffset).r;\n                  vec2 gb = texture2D(uTexture,vUv).gb;\n                  return vec3(r,gb);\n                }\n                void main() {\n                  vec3 color = rgbShift(uTexture,vUv,uOffset);\n                  gl_FragColor = vec4(color,uAlpha);\n                }\n              `,\n    transparent: true,\n  })\n  let plane = new THREE.Mesh(geometry, material)\n  scene.add(plane)\n\n  function initEffectShell() {\n    let promises = []\n\n    const THREEtextureLoader = new THREE.TextureLoader()\n\n    items.forEach((item, index) => {\n      // create textures\n      promises.push(\n        loadTexture(THREEtextureLoader, item.img ? item.img.src : null, index)\n      )\n    })\n\n    return new Promise((resolve, reject) => {\n      // resolve textures promises\n      Promise.all(promises).then(promises => {\n        // all textures are loaded\n        promises.forEach((promise, index) => {\n          // assign texture to item\n          items[index].texture = promise.texture\n        })\n        resolve()\n      })\n    })\n  }\n\n  initEffectShell().then(() => {\n    console.log(\"load finished\")\n    isLoaded = true\n  })\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"sourceRoot":""}